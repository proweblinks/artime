---
phase: 29-prompt-pipeline-integration
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - modules/AppVideoWizard/resources/views/livewire/modals/shot-preview.blade.php
autonomous: true

must_haves:
  truths:
    - "Shot Preview modal displays VOICE PROMPT section"
    - "Voice prompt shows narration or dialogue text"
    - "Voice prompt shows emotional direction if present"
    - "Silent shots show no voice prompt section (graceful handling)"
  artifacts:
    - path: "modules/AppVideoWizard/resources/views/livewire/modals/shot-preview.blade.php"
      provides: "Voice prompt display section"
      contains: "VOICE PROMPT"
  key_links:
    - from: "shot-preview.blade.php"
      to: "$shot speech content"
      via: "dialogue/narration/monologue fields"
      pattern: "VOICE PROMPT"
---

<objective>
Add Voice Prompt display section to Shot Preview modal showing narration/dialogue text and emotional direction.

Purpose: Users can see IMAGE PROMPT and VIDEO PROMPT in Shot Preview but not voice content. The voice prompts exist (from VoicePromptBuilderService) but aren't displayed. This adds visibility into what voice content will be generated.

Output: Shot Preview modal will have a VOICE PROMPT section alongside IMAGE PROMPT and VIDEO PROMPT.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/29-prompt-pipeline-integration/29-CONTEXT.md
@modules/AppVideoWizard/resources/views/livewire/modals/shot-preview.blade.php
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add Voice Prompt section to prompts grid</name>
  <files>modules/AppVideoWizard/resources/views/livewire/modals/shot-preview.blade.php</files>
  <action>
In shot-preview.blade.php, find the Prompts Section (around line 343-361) which has a 2-column grid with IMAGE PROMPT and VIDEO PROMPT.

Change the grid from 2 columns to 3 columns to add VOICE PROMPT:

```blade
{{-- Prompts Section (compact) --}}
<div style="padding: 0.5rem 0.75rem; background: rgba(0,0,0,0.2); border-top: 1px solid rgba(255,255,255,0.1); flex-shrink: 0;">
    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 0.5rem;">
        {{-- Image Prompt --}}
        <div style="background: rgba(16, 185, 129, 0.1); border: 1px solid rgba(16, 185, 129, 0.3); border-radius: 0.4rem; padding: 0.4rem;">
            <div style="font-size: 0.6rem; color: rgba(16, 185, 129, 0.9); margin-bottom: 0.2rem; font-weight: 600;">üñºÔ∏è {{ __('IMAGE PROMPT') }}</div>
            <div style="font-size: 0.7rem; color: rgba(167, 243, 208, 0.95); line-height: 1.3; max-height: 50px; overflow-y: auto;">
                {{ $shot['prompt'] ?? $shot['imagePrompt'] ?? __('No prompt') }}
            </div>
        </div>
        {{-- Video Prompt --}}
        <div style="background: rgba(6, 182, 212, 0.1); border: 1px solid rgba(6, 182, 212, 0.3); border-radius: 0.4rem; padding: 0.4rem;">
            <div style="font-size: 0.6rem; color: rgba(6, 182, 212, 0.9); margin-bottom: 0.2rem; font-weight: 600;">üé¨ {{ __('VIDEO PROMPT') }}</div>
            <div style="font-size: 0.7rem; color: rgba(103, 232, 249, 0.95); line-height: 1.3; max-height: 50px; overflow-y: auto;">
                {{ $shot['videoPrompt'] ?? $shot['narrativeBeat']['motionDescription'] ?? __('Action prompt will be generated') }}
            </div>
        </div>
        {{-- Voice Prompt --}}
        <div style="background: rgba(139, 92, 246, 0.1); border: 1px solid rgba(139, 92, 246, 0.3); border-radius: 0.4rem; padding: 0.4rem;">
            <div style="font-size: 0.6rem; color: rgba(139, 92, 246, 0.9); margin-bottom: 0.2rem; font-weight: 600;">üé§ {{ __('VOICE PROMPT') }}</div>
            <div style="font-size: 0.7rem; color: rgba(196, 181, 253, 0.95); line-height: 1.3; max-height: 50px; overflow-y: auto;">
                @php
                    $voiceText = $shot['dialogue'] ?? $shot['monologue'] ?? $shot['narration'] ?? null;
                    $emotion = $shot['emotion'] ?? $shot['emotionalTone'] ?? null;
                @endphp
                @if($voiceText)
                    @if($emotion)
                        <span style="color: rgba(236, 72, 153, 0.9); font-size: 0.6rem;">[{{ $emotion }}]</span>
                    @endif
                    {{ $voiceText }}
                @else
                    {{ __('Silent shot') }}
                @endif
            </div>
        </div>
    </div>
</div>
```

Key design choices:
- Purple color scheme (rgba(139, 92, 246)) matches voice-related UI elsewhere
- Shows dialogue/monologue/narration content (whichever exists)
- Shows emotional direction tag if present in shot data
- Shows "Silent shot" for shots without voice content
- Same compact height (50px max-height with scroll) as other prompts
  </action>
  <verify>
Open the file and verify:
1. Grid is 3 columns: `grid-template-columns: 1fr 1fr 1fr`
2. Voice Prompt section exists with purple styling
3. Shows dialogue/monologue/narration content
4. Shows emotion tag if present
5. Graceful "Silent shot" fallback
  </verify>
  <done>
Voice Prompt section displays in Shot Preview modal alongside Image Prompt and Video Prompt. PPL-03 complete.
  </done>
</task>

</tasks>

<verification>
1. Shot Preview modal shows 3-column prompt grid
2. VOICE PROMPT section has purple styling matching voice UI
3. Dialogue/monologue/narration text displays correctly
4. Emotional direction tags display if present
5. Silent shots show "Silent shot" gracefully
6. No visual layout issues (columns balanced)
</verification>

<success_criteria>
- PPL-03 complete: Voice prompt displayed in Shot Preview modal
- Users can preview voice content before generation
- Emotional direction visible for shots with emotion data
- Silent shots handled gracefully
</success_criteria>

<output>
After completion, create `.planning/phases/29-prompt-pipeline-integration/29-03-SUMMARY.md`
</output>
