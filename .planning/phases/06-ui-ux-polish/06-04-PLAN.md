---
phase: 06-ui-ux-polish
plan: 04
type: execute
wave: 2
depends_on: ["06-01", "06-02"]
files_modified:
  - modules/AppVideoWizard/resources/views/livewire/steps/animation.blade.php
  - modules/AppVideoWizard/resources/views/livewire/steps/storyboard.blade.php
autonomous: true
user_setup: []

must_haves:
  truths:
    - "Animation step shows speaker names with voiceovers"
    - "Visual consistency across all views"
    - "Arc template selector visible"
    - "Camera movement icons displayed"
  artifacts:
    - path: "modules/AppVideoWizard/resources/views/livewire/steps/animation.blade.php"
      provides: "Enhanced animation view with speaker info"
      contains: "speaker"
  key_links:
    - from: "animation.blade.php"
      to: "voiceover display"
      via: "speaker name integration"
      pattern: "speechSegments"
---

<objective>
Add final UI polish: speaker names in animation, arc template selector, camera icons.

**PROBLEM:** Various UI elements missing polish:
- Animation step doesn't show who's speaking
- No way to change arc template
- Camera movement not visualized
- Inconsistent spacing/styling

Purpose: Complete the professional UI experience across all views.

Output: Polished, consistent UI with all information visible.
</objective>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@modules/AppVideoWizard/resources/views/livewire/steps/animation.blade.php
@modules/AppVideoWizard/resources/views/livewire/steps/storyboard.blade.php
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add speaker names to animation step</name>
  <files>modules/AppVideoWizard/resources/views/livewire/steps/animation.blade.php</files>
  <action>
Find the scene card or voiceover section in animation step and add speaker info.

Look for where voiceover status is displayed and add:

```blade
{{-- PHASE 6: Speaker Info in Animation --}}
@php
    $scriptScene = $script['scenes'][$index] ?? null;
    $speechSegments = $scriptScene['speechSegments'] ?? [];
@endphp

@if(!empty($speechSegments))
    <div style="
        display: flex;
        flex-wrap: wrap;
        gap: 0.25rem;
        margin-top: 0.35rem;
        padding-top: 0.35rem;
        border-top: 1px solid rgba(255,255,255,0.1);
    ">
        @php
            $speakers = collect($speechSegments)->pluck('speaker')->filter()->unique()->values();
        @endphp

        @foreach($speakers as $speaker)
            @php
                $character = collect($characterBible['characters'] ?? [])->firstWhere('name', $speaker);
                $hasVoice = !empty($character['voiceId']);
            @endphp
            <div style="
                display: inline-flex;
                align-items: center;
                gap: 0.2rem;
                background: {{ $hasVoice ? 'rgba(139, 92, 246, 0.2)' : 'rgba(168, 162, 158, 0.2)' }};
                padding: 0.15rem 0.4rem;
                border-radius: 0.25rem;
                font-size: 0.6rem;
                color: {{ $hasVoice ? 'rgba(139, 92, 246, 0.95)' : 'rgba(168, 162, 158, 0.9)' }};
            ">
                <svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path>
                    <path d="M19 10v2a7 7 0 0 1-14 0v-2"></path>
                </svg>
                <span>{{ $speaker }}</span>
                @if(!$hasVoice)
                    <span style="opacity: 0.7;">(no voice)</span>
                @endif
            </div>
        @endforeach
    </div>
@endif
```

WHY: Showing speakers helps verify voice assignments are correct.
  </action>
  <verify>
    - Speaker names displayed in animation view
    - Purple highlight for speakers with assigned voice
    - Gray highlight for speakers without voice
    - Microphone icon next to name
    - No blade syntax errors
  </verify>
  <done>Speaker names added to animation step</done>
</task>

<task type="auto">
  <name>Task 2: Add arc template selector to storyboard</name>
  <files>modules/AppVideoWizard/resources/views/livewire/steps/storyboard.blade.php</files>
  <action>
Add an arc template selector in the storyboard header area or settings panel:

```blade
{{-- PHASE 6: Arc Template Selector --}}
@if(!empty($emotionalArcData['values']))
    <div style="
        display: flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.5rem 0.75rem;
        background: rgba(139, 92, 246, 0.1);
        border-radius: 0.5rem;
        margin-bottom: 0.75rem;
    ">
        <div style="
            display: flex;
            align-items: center;
            gap: 0.25rem;
            color: rgba(139, 92, 246, 0.9);
            font-size: 0.7rem;
        ">
            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>
            </svg>
            <span style="font-weight: 600;">Emotional Arc:</span>
        </div>

        <select
            wire:model.live="arcTemplate"
            wire:change="setArcTemplate($event.target.value)"
            style="
                background: rgba(0, 0, 0, 0.3);
                border: 1px solid rgba(139, 92, 246, 0.3);
                color: #fff;
                padding: 0.25rem 0.5rem;
                border-radius: 0.25rem;
                font-size: 0.7rem;
                cursor: pointer;
            "
        >
            @foreach($arcTemplates as $key => $label)
                <option value="{{ $key }}" {{ $arcTemplate === $key ? 'selected' : '' }}>
                    {{ $label }}
                </option>
            @endforeach
        </select>

        {{-- Arc Summary --}}
        @php
            $summary = $this->getArcSummary();
        @endphp
        @if($summary['hasData'] ?? false)
            <div style="
                display: flex;
                gap: 0.75rem;
                margin-left: auto;
                font-size: 0.65rem;
                color: rgba(255,255,255,0.6);
            ">
                <span>Shots: {{ $summary['shotCount'] ?? 0 }}</span>
                <span>Peak: {{ $summary['peakIntensity'] ?? '0%' }}</span>
                <span>Climax: {{ $summary['climaxScene'] ?? 'N/A' }}</span>
            </div>
        @endif
    </div>
@endif
```

WHY: Arc template selector allows users to change emotional pacing style.
  </action>
  <verify>
    - Template dropdown appears when arc data exists
    - All 6 templates available (hollywood, action, drama, thriller, comedy, documentary)
    - Selecting template triggers setArcTemplate()
    - Summary shows shot count, peak, climax scene
    - No blade syntax errors
  </verify>
  <done>Arc template selector added to storyboard</done>
</task>

<task type="auto">
  <name>Task 3: Add camera movement icons</name>
  <files>modules/AppVideoWizard/resources/views/livewire/modals/multi-shot.blade.php</files>
  <action>
Enhance camera movement display with visual icons. Add to the shot badges area:

```blade
{{-- PHASE 6: Camera Movement with Icons --}}
@if(!empty($shot['cameraMovement']) || !empty($shot['suggestedMovement']))
    @php
        $movement = $shot['cameraMovement'] ?? $shot['suggestedMovement'] ?? 'static';
        $movementIcons = [
            'push-in' => '<path d="M5 12h14M12 5l7 7-7 7"/>',
            'pull-out' => '<path d="M19 12H5M12 19l-7-7 7-7"/>',
            'pan-left' => '<path d="M19 12H5M5 12l7-7M5 12l7 7"/>',
            'pan-right' => '<path d="M5 12h14M19 12l-7-7M19 12l-7 7"/>',
            'tilt-up' => '<path d="M12 19V5M5 12l7-7 7 7"/>',
            'tilt-down' => '<path d="M12 5v14M19 12l-7 7-7-7"/>',
            'static' => '<circle cx="12" cy="12" r="3"/>',
            'slow-push' => '<path d="M5 12h14M12 5l7 7-7 7" stroke-dasharray="4 2"/>',
            'slight-drift' => '<path d="M5 12c4-2 10 2 14 0"/>',
            'dolly' => '<path d="M5 12h14"/><circle cx="8" cy="16" r="2"/><circle cx="16" cy="16" r="2"/>',
        ];
        $iconPath = $movementIcons[strtolower($movement)] ?? $movementIcons['static'];
    @endphp

    <div class="vw-shot-badge vw-shot-badge-movement"
         title="{{ ucwords(str_replace('-', ' ', $movement)) }}"
         style="display: inline-flex; align-items: center; gap: 0.2rem;">
        <svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            {!! $iconPath !!}
        </svg>
        <span>{{ strtoupper(Str::limit(str_replace('-', '', $movement), 4, '')) }}</span>
    </div>
@endif
```

WHY: Visual camera icons make movement direction immediately clear.
  </action>
  <verify>
    - Camera movement badge shows icon
    - Different icons for push-in, pull-out, pan, tilt, static
    - Tooltip shows full movement name
    - No blade syntax errors
  </verify>
  <done>Camera movement icons added</done>
</task>

<task type="auto">
  <name>Task 4: Add visual consistency improvements</name>
  <files>modules/AppVideoWizard/resources/views/livewire/steps/storyboard.blade.php</files>
  <action>
Add CSS improvements for visual consistency:

```css
/* PHASE 6: Visual Consistency */

/* Consistent card shadows */
.vw-scene-card {
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
    transition: box-shadow 0.2s ease, transform 0.2s ease;
}

.vw-scene-card:hover {
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.4);
    transform: translateY(-2px);
}

/* Badge hover effects */
.vw-shot-badge:hover,
.vw-status-badge:hover {
    filter: brightness(1.1);
    cursor: default;
}

/* Smooth transitions for status changes */
.vw-status-badge,
.vw-intensity-fill {
    transition: all 0.3s ease;
}

/* Focus states for accessibility */
select:focus,
button:focus {
    outline: 2px solid rgba(139, 92, 246, 0.5);
    outline-offset: 2px;
}

/* Consistent spacing */
.vw-card-section {
    padding: 0.5rem 0;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    margin-top: 0.5rem;
}

/* Scrollbar consistency */
.vw-scene-dialogue::-webkit-scrollbar,
.vw-modal-content::-webkit-scrollbar {
    width: 4px;
}

.vw-scene-dialogue::-webkit-scrollbar-thumb,
.vw-modal-content::-webkit-scrollbar-thumb {
    background: rgba(139, 92, 246, 0.3);
    border-radius: 2px;
}

.vw-scene-dialogue::-webkit-scrollbar-thumb:hover,
.vw-modal-content::-webkit-scrollbar-thumb:hover {
    background: rgba(139, 92, 246, 0.5);
}

/* Empty state styling */
.vw-empty-state {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 2rem;
    color: rgba(255, 255, 255, 0.5);
    text-align: center;
}

.vw-empty-state svg {
    margin-bottom: 0.75rem;
    opacity: 0.5;
}
```

WHY: Consistent visual polish creates a professional user experience.
  </action>
  <verify>
    - Card hover effects added
    - Badge hover effects added
    - Smooth transitions for status changes
    - Focus states for accessibility
    - Consistent scrollbar styling
    - No CSS syntax errors
  </verify>
  <done>Visual consistency improvements added</done>
</task>

</tasks>

<verification>
1. Check animation step shows speaker names
2. Check arc template selector works
3. Check camera movement icons display
4. Check hover effects work
5. No PHP/Blade/CSS errors
</verification>

<success_criteria>
- Speaker names in animation view
- Arc template selector functional
- Camera movement icons visible
- Consistent hover effects
- Smooth transitions
- Accessible focus states
- No syntax errors
</success_criteria>

<output>
After completion, create `.planning/phases/06-ui-ux-polish/06-04-SUMMARY.md`
</output>
