---
phase: 06-ui-ux-polish
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - modules/AppVideoWizard/resources/views/livewire/steps/storyboard.blade.php
  - modules/AppVideoWizard/resources/views/livewire/modals/multi-shot.blade.php
autonomous: true
user_setup: []

must_haves:
  truths:
    - "Scene cards show dialogue/narration text"
    - "Multi-shot cards show per-shot dialogue"
    - "Speaker names are displayed when available"
    - "Dialogue is visually distinct from visual prompts"
  artifacts:
    - path: "modules/AppVideoWizard/resources/views/livewire/steps/storyboard.blade.php"
      provides: "Dialogue text display on scene cards"
      contains: "speechSegments"
  key_links:
    - from: "storyboard.blade.php"
      to: "scene card"
      via: "dialogue text display"
      pattern: "narration-text"
---

<objective>
Add dialogue/narration text to shot cards for better context visibility.

**PROBLEM:** Scene cards only show visual prompts:
- No dialogue text visible
- No speaker names shown
- Hard to understand scene context at a glance
- Multi-shot cards don't show per-shot dialogue

Purpose: Display dialogue/narration on scene cards for complete context.

Output: Scene cards show dialogue with speaker names, distinct from visual prompts.
</objective>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@modules/AppVideoWizard/resources/views/livewire/steps/storyboard.blade.php
@modules/AppVideoWizard/resources/views/livewire/modals/multi-shot.blade.php
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add dialogue section to storyboard scene cards</name>
  <files>modules/AppVideoWizard/resources/views/livewire/steps/storyboard.blade.php</files>
  <action>
Find the scene card content area (where prompt text is displayed) and add a dialogue section above or below it.

Look for where prompt is displayed (around line 1850-1900) and add:

```blade
{{-- PHASE 6: Dialogue/Narration Text --}}
@php
    $scriptScene = $script['scenes'][$index] ?? null;
    $speechSegments = $scriptScene['speechSegments'] ?? [];
    $narration = $scriptScene['narration'] ?? '';
@endphp

@if(!empty($speechSegments) || !empty($narration))
    <div class="vw-scene-dialogue" style="
        background: rgba(59, 130, 246, 0.1);
        border-left: 3px solid rgba(59, 130, 246, 0.5);
        padding: 0.5rem 0.75rem;
        margin-bottom: 0.5rem;
        border-radius: 0 0.25rem 0.25rem 0;
        font-size: 0.75rem;
    ">
        <div style="
            display: flex;
            align-items: center;
            gap: 0.25rem;
            margin-bottom: 0.25rem;
            font-size: 0.65rem;
            color: rgba(59, 130, 246, 0.9);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        ">
            <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
            </svg>
            <span>Dialogue</span>
        </div>

        @if(!empty($speechSegments))
            @foreach(array_slice($speechSegments, 0, 2) as $segment)
                <div style="margin-bottom: 0.25rem;">
                    @if(!empty($segment['speaker']))
                        <span style="
                            color: rgba(139, 92, 246, 0.9);
                            font-weight: 600;
                            font-size: 0.7rem;
                        ">{{ $segment['speaker'] }}:</span>
                    @endif
                    <span style="color: rgba(255,255,255,0.85);">
                        {{ Str::limit($segment['text'] ?? '', 80) }}
                    </span>
                </div>
            @endforeach
            @if(count($speechSegments) > 2)
                <div style="color: rgba(255,255,255,0.5); font-size: 0.65rem;">
                    +{{ count($speechSegments) - 2 }} more segments...
                </div>
            @endif
        @elseif(!empty($narration))
            <div style="color: rgba(255,255,255,0.85);">
                {{ Str::limit($narration, 120) }}
            </div>
        @endif
    </div>
@endif
```

WHY: Dialogue context helps users understand scene intent at a glance.
  </action>
  <verify>
    - Dialogue section appears on scene cards
    - Shows speechSegments if available, else narration
    - Speaker names displayed in purple
    - Limited to 2 segments with "+N more" indicator
    - No blade syntax errors
  </verify>
  <done>Dialogue section added to storyboard scene cards</done>
</task>

<task type="auto">
  <name>Task 2: Add dialogue to multi-shot modal shot cards</name>
  <files>modules/AppVideoWizard/resources/views/livewire/modals/multi-shot.blade.php</files>
  <action>
Find the shot card content in the multi-shot modal and add dialogue display.

Look for the shot card layout (around .msm-shot-card class) and add:

```blade
{{-- PHASE 6: Shot Dialogue Display --}}
@if(!empty($shot['dialogue']))
    <div class="msm-shot-dialogue" style="
        background: rgba(59, 130, 246, 0.1);
        border-left: 2px solid rgba(59, 130, 246, 0.5);
        padding: 0.35rem 0.5rem;
        margin: 0.35rem 0;
        border-radius: 0 0.25rem 0.25rem 0;
        font-size: 0.7rem;
    ">
        @if(!empty($shot['speakingCharacter']))
            <span style="
                color: rgba(139, 92, 246, 0.9);
                font-weight: 600;
                font-size: 0.65rem;
            ">{{ $shot['speakingCharacter'] }}:</span>
        @endif
        <span style="color: rgba(255,255,255,0.85);">
            {{ Str::limit($shot['dialogue'], 60) }}
        </span>
    </div>
@elseif(!empty($shot['needsLipSync']))
    <div style="
        display: inline-flex;
        align-items: center;
        gap: 0.25rem;
        background: rgba(139, 92, 246, 0.2);
        padding: 0.15rem 0.4rem;
        border-radius: 0.25rem;
        font-size: 0.6rem;
        color: rgba(139, 92, 246, 0.9);
        margin: 0.25rem 0;
    ">
        <svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path>
            <path d="M19 10v2a7 7 0 0 1-14 0v-2"></path>
        </svg>
        <span>Lip Sync</span>
    </div>
@endif
```

WHY: Per-shot dialogue shows which shots have speaking parts.
  </action>
  <verify>
    - Shot cards show dialogue text
    - Speaker character name displayed
    - Lip sync indicator for dialogue shots without text
    - No blade syntax errors
  </verify>
  <done>Dialogue added to multi-shot modal shot cards</done>
</task>

<task type="auto">
  <name>Task 3: Add CSS classes for dialogue styling</name>
  <files>modules/AppVideoWizard/resources/views/livewire/steps/storyboard.blade.php</files>
  <action>
Add reusable CSS classes for dialogue styling in the style section (find the &lt;style&gt; block):

```css
/* PHASE 6: Dialogue Display Styles */
.vw-scene-dialogue {
    background: rgba(59, 130, 246, 0.1);
    border-left: 3px solid rgba(59, 130, 246, 0.5);
    padding: 0.5rem 0.75rem;
    margin-bottom: 0.5rem;
    border-radius: 0 0.25rem 0.25rem 0;
    font-size: 0.75rem;
    max-height: 80px;
    overflow-y: auto;
}

.vw-scene-dialogue::-webkit-scrollbar {
    width: 4px;
}

.vw-scene-dialogue::-webkit-scrollbar-thumb {
    background: rgba(59, 130, 246, 0.3);
    border-radius: 2px;
}

.vw-dialogue-label {
    display: flex;
    align-items: center;
    gap: 0.25rem;
    margin-bottom: 0.25rem;
    font-size: 0.65rem;
    color: rgba(59, 130, 246, 0.9);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.vw-dialogue-speaker {
    color: rgba(139, 92, 246, 0.9);
    font-weight: 600;
    font-size: 0.7rem;
}

.vw-dialogue-text {
    color: rgba(255, 255, 255, 0.85);
    line-height: 1.4;
}

.vw-dialogue-more {
    color: rgba(255, 255, 255, 0.5);
    font-size: 0.65rem;
    font-style: italic;
}
```

WHY: Reusable CSS classes ensure consistent styling across views.
  </action>
  <verify>
    - CSS classes added to style block
    - .vw-scene-dialogue with scroll for long content
    - .vw-dialogue-speaker in purple
    - .vw-dialogue-text styled appropriately
    - No CSS syntax errors
  </verify>
  <done>CSS classes for dialogue styling added</done>
</task>

<task type="auto">
  <name>Task 4: Update scene card to use CSS classes</name>
  <files>modules/AppVideoWizard/resources/views/livewire/steps/storyboard.blade.php</files>
  <action>
Update the dialogue section from Task 1 to use the CSS classes:

```blade
{{-- PHASE 6: Dialogue/Narration Text --}}
@php
    $scriptScene = $script['scenes'][$index] ?? null;
    $speechSegments = $scriptScene['speechSegments'] ?? [];
    $narration = $scriptScene['narration'] ?? '';
@endphp

@if(!empty($speechSegments) || !empty($narration))
    <div class="vw-scene-dialogue">
        <div class="vw-dialogue-label">
            <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
            </svg>
            <span>Dialogue</span>
        </div>

        @if(!empty($speechSegments))
            @foreach(array_slice($speechSegments, 0, 2) as $segment)
                <div style="margin-bottom: 0.25rem;">
                    @if(!empty($segment['speaker']))
                        <span class="vw-dialogue-speaker">{{ $segment['speaker'] }}:</span>
                    @endif
                    <span class="vw-dialogue-text">
                        {{ Str::limit($segment['text'] ?? '', 80) }}
                    </span>
                </div>
            @endforeach
            @if(count($speechSegments) > 2)
                <div class="vw-dialogue-more">
                    +{{ count($speechSegments) - 2 }} more segments...
                </div>
            @endif
        @elseif(!empty($narration))
            <div class="vw-dialogue-text">
                {{ Str::limit($narration, 120) }}
            </div>
        @endif
    </div>
@endif
```

WHY: Using CSS classes instead of inline styles improves maintainability.
  </action>
  <verify>
    - Dialogue section uses CSS classes
    - vw-scene-dialogue, vw-dialogue-label, vw-dialogue-speaker, vw-dialogue-text applied
    - Same visual appearance as inline version
    - No blade syntax errors
  </verify>
  <done>Scene card updated to use CSS classes</done>
</task>

</tasks>

<verification>
1. Visual check that dialogue appears on scene cards
2. Check that speechSegments are displayed when available
3. Check that speaker names appear in purple
4. Verify multi-shot modal shows per-shot dialogue
5. No PHP/Blade errors
</verification>

<success_criteria>
- Storyboard scene cards show dialogue/narration
- Speaker names displayed prominently
- Multi-shot cards show per-shot dialogue
- Lip sync indicator for dialogue shots
- CSS classes reusable
- No syntax errors
</success_criteria>

<output>
After completion, create `.planning/phases/06-ui-ux-polish/06-01-SUMMARY.md`
</output>
