<?php

namespace Modules\AppVideoWizard\Database\Seeders;

use Illuminate\Database\Seeder;
use Modules\AppVideoWizard\Models\VwSetting;

class VwSettingSeeder extends Seeder
{
    /**
     * Run the database seeds.
     */
    public function run(): void
    {
        $settings = [
            // =============================================
            // SHOT INTELLIGENCE SETTINGS
            // =============================================
            [
                'slug' => 'shot_intelligence_enabled',
                'name' => 'Enable AI Shot Intelligence',
                'category' => 'shot_intelligence',
                'description' => 'When enabled, AI will analyze each scene and dynamically determine the optimal number of shots, their types, and durations. When disabled, uses manual shot count selection.',
                'value_type' => 'boolean',
                'value' => 'true',
                'default_value' => 'true',
                'input_type' => 'checkbox',
                'input_help' => 'AI analyzes scene content (dialogue, action, emotion) to determine shot breakdown',
                'icon' => 'fa-solid fa-brain',
                'is_system' => true,
                'sort_order' => 1,
            ],
            [
                'slug' => 'shot_min_per_scene',
                'name' => 'Minimum Shots Per Scene',
                'category' => 'shot_intelligence',
                'description' => 'The minimum number of shots that can be created for any scene, regardless of AI recommendation.',
                'value_type' => 'integer',
                'value' => '5',
                'default_value' => '5',
                'min_value' => 2,
                'max_value' => 10,
                'input_type' => 'number',
                'input_help' => 'Professional scenes typically need at least 5 shots for dynamic visual storytelling',
                'icon' => 'fa-solid fa-arrow-down',
                'is_system' => true,
                'sort_order' => 2,
            ],
            [
                'slug' => 'shot_max_per_scene',
                'name' => 'Maximum Shots Per Scene',
                'category' => 'shot_intelligence',
                'description' => 'The maximum number of shots allowed per scene. Set higher for complex action sequences.',
                'value_type' => 'integer',
                'value' => '20',
                'default_value' => '20',
                'min_value' => 3,
                'max_value' => 50,
                'input_type' => 'number',
                'input_help' => 'Complex scenes with lots of action or dialogue may need more shots',
                'icon' => 'fa-solid fa-arrow-up',
                'is_system' => true,
                'sort_order' => 3,
            ],
            [
                'slug' => 'shot_default_count',
                'name' => 'Default Shot Count',
                'category' => 'shot_intelligence',
                'description' => 'Default number of shots when AI intelligence is disabled or as a fallback.',
                'value_type' => 'integer',
                'value' => '5',
                'default_value' => '5',
                'min_value' => 2,
                'max_value' => 10,
                'input_type' => 'number',
                'input_help' => 'Used when manual mode is selected or AI cannot determine shot count',
                'icon' => 'fa-solid fa-hashtag',
                'is_system' => true,
                'sort_order' => 4,
            ],
            [
                'slug' => 'shot_ai_prompt',
                'name' => 'Shot Analysis AI Prompt',
                'category' => 'shot_intelligence',
                'description' => 'The prompt template used by AI to analyze scenes and determine shot breakdown. Variables: {{scene_description}}, {{narration}}, {{duration}}, {{mood}}, {{genre}}, {{pacing}}, {{has_dialogue}}, {{available_shot_types}}',
                'value_type' => 'string',
                'value' => 'Analyze this scene and determine the optimal cinematic shot breakdown.

SCENE: {{scene_description}}
NARRATION: {{narration}}
DURATION: {{duration}} seconds
MOOD: {{mood}}
GENRE: {{genre}}
PACING: {{pacing}}
HAS DIALOGUE: {{has_dialogue}}

DURATION RULES (CRITICAL - vary durations based on shot type and content):
- Establishing/Wide shots: 6s or 10s (longer to set the scene)
- Medium shots: 6s (standard narrative)
- Close-up shots: 5s (quick emotional impact)
- Detail/Insert shots: 5s (brief focus)
- Reaction shots: 5s (quick cut)
- Dialogue shots with lip-sync: 10s, 15s, or 20s (match dialogue length)
- Action sequences: 5s (fast pacing)
- Emotional/contemplative moments: 6s or 10s (let it breathe)

Consider:
1. Pacing - {{pacing}} pacing affects shot duration (fast=shorter, slow=longer)
2. Dialogue - shots with speaking characters need lip-sync (needsLipSync: true) and LONGER durations (10-20s)
3. Visual variety - mix shot types AND durations for professional look
4. Story beats - establish (6-10s), develop (5-6s), climax (5s for impact)
5. Scene mood - {{mood}} mood affects rhythm

Available shot types: {{available_shot_types}}

Return ONLY valid JSON (no markdown, no explanation):
{
  "shotCount": number,
  "reasoning": "brief explanation of shot and DURATION choices",
  "shots": [
    {
      "type": "shot_type_slug",
      "duration": number (MUST vary: 5 for close-ups/action, 6 for medium/standard, 10 for establishing/dialogue, 15-20 for long dialogue),
      "purpose": "why this shot",
      "cameraMovement": "movement description",
      "needsLipSync": boolean
    }
  ]
}',
                'default_value' => null,
                'input_type' => 'textarea',
                'input_help' => 'Customize how AI analyzes scenes. Use {{variables}} for dynamic content.',
                'icon' => 'fa-solid fa-message',
                'is_system' => true,
                'sort_order' => 5,
            ],

            // =============================================
            // SEEDANCE / ANIMATION SETTINGS
            // =============================================
            [
                'slug' => 'animation_default_model',
                'name' => 'Default Animation Model',
                'category' => 'animation',
                'description' => 'The video animation model used for all shots.',
                'value_type' => 'string',
                'value' => 'seedance',
                'default_value' => 'seedance',
                'allowed_values' => ['seedance'],
                'input_type' => 'select',
                'input_help' => 'Seedance v1.5 Pro via WaveSpeed API for all video generation',
                'icon' => 'fa-solid fa-wand-magic-sparkles',
                'is_system' => true,
                'sort_order' => 1,
            ],
            [
                'slug' => 'seedance_default_quality',
                'name' => 'Default Seedance Quality',
                'category' => 'animation',
                'description' => 'Default quality variant for Seedance video generation.',
                'value_type' => 'string',
                'value' => 'pro',
                'default_value' => 'pro',
                'allowed_values' => ['pro', 'fast'],
                'input_type' => 'select',
                'input_help' => 'Pro: highest quality, slower. Fast: speed-optimized, cheaper.',
                'icon' => 'fa-solid fa-gem',
                'is_system' => false,
                'sort_order' => 2,
            ],
            [
                'slug' => 'seedance_default_resolution',
                'name' => 'Default Seedance Resolution',
                'category' => 'animation',
                'description' => 'Default resolution for Seedance video generation.',
                'value_type' => 'string',
                'value' => '1080p',
                'default_value' => '1080p',
                'allowed_values' => ['480p', '720p', '1080p'],
                'input_type' => 'select',
                'input_help' => '480p (Pro only), 720p, 1080p. Fast variant only supports 720p/1080p.',
                'icon' => 'fa-solid fa-display',
                'is_system' => false,
                'sort_order' => 3,
            ],
            [
                'slug' => 'seedance_default_duration',
                'name' => 'Default Seedance Duration',
                'category' => 'animation',
                'description' => 'Default duration (seconds) for Seedance video generation.',
                'value_type' => 'integer',
                'value' => '8',
                'default_value' => '8',
                'min_value' => 4,
                'max_value' => 12,
                'input_type' => 'number',
                'input_help' => 'Supported durations: 4, 5, 6, 8, 10, 12 seconds',
                'icon' => 'fa-solid fa-stopwatch',
                'is_system' => false,
                'sort_order' => 4,
            ],
            [
                'slug' => 'seedance_anti_speech_default',
                'name' => 'Anti-Speech Suffix Default',
                'category' => 'animation',
                'description' => 'Default behavior for anti-speech suffix. When true, suppresses unwanted dialogue audio.',
                'value_type' => 'boolean',
                'value' => 'true',
                'default_value' => 'true',
                'input_type' => 'checkbox',
                'input_help' => 'Automatically disabled for shots with detected dialogue/lip-sync needs.',
                'icon' => 'fa-solid fa-volume-xmark',
                'is_system' => false,
                'sort_order' => 5,
            ],
            [
                'slug' => 'seedance_generate_audio_default',
                'name' => 'Generate Audio Default',
                'category' => 'animation',
                'description' => 'Whether Seedance generates audio by default.',
                'value_type' => 'boolean',
                'value' => 'true',
                'default_value' => 'true',
                'input_type' => 'checkbox',
                'input_help' => 'Disable for shots that will receive custom voiceover or music in post-production.',
                'icon' => 'fa-solid fa-music',
                'is_system' => false,
                'sort_order' => 6,
            ],

            // =============================================
            // SEEDANCE PROMPT PIPELINE SETTINGS
            // =============================================
            [
                'slug' => 'seedance_active_version',
                'name' => 'Seedance Active Version',
                'category' => 'animation',
                'description' => 'Which Seedance model version to use for video generation.',
                'value_type' => 'string',
                'value' => '1.5',
                'default_value' => '1.5',
                'allowed_values' => json_encode(['1.5', '2.0']),
                'input_type' => 'select',
                'input_help' => 'v2.0 requires a configured endpoint. Falls back to v1.5 if unavailable.',
                'icon' => 'fa-solid fa-code-branch',
                'is_system' => false,
                'sort_order' => 10,
            ],
            [
                'slug' => 'seedance_v2_endpoint',
                'name' => 'Seedance v2.0 Pro Endpoint',
                'category' => 'animation',
                'description' => 'WaveSpeed API endpoint path for Seedance v2.0 Pro quality variant.',
                'value_type' => 'string',
                'value' => '',
                'default_value' => '',
                'input_type' => 'text',
                'input_placeholder' => 'bytedance/seedance-v2.0-pro/image-to-video',
                'input_help' => 'Leave empty until v2.0 endpoint is available.',
                'icon' => 'fa-solid fa-link',
                'is_system' => true,
                'sort_order' => 11,
            ],
            [
                'slug' => 'seedance_v2_endpoint_fast',
                'name' => 'Seedance v2.0 Fast Endpoint',
                'category' => 'animation',
                'description' => 'WaveSpeed API endpoint path for Seedance v2.0 Fast variant.',
                'value_type' => 'string',
                'value' => '',
                'default_value' => '',
                'input_type' => 'text',
                'input_placeholder' => 'bytedance/seedance-v2.0-pro/image-to-video-fast',
                'input_help' => 'Leave empty until v2.0 fast endpoint is available.',
                'icon' => 'fa-solid fa-link',
                'is_system' => true,
                'sort_order' => 12,
            ],
            [
                'slug' => 'seedance_prompt_format',
                'name' => 'Seedance Prompt Format',
                'category' => 'animation',
                'description' => 'Prompt building strategy. "four_part" uses Seedance-native Subject+Action+Camera+Style. "legacy_7_layer" uses the original Hollywood 7-layer builder.',
                'value_type' => 'string',
                'value' => 'four_part',
                'default_value' => 'four_part',
                'allowed_values' => json_encode(['four_part', 'legacy_7_layer']),
                'input_type' => 'select',
                'input_help' => 'Switch to legacy_7_layer for instant rollback if four_part causes issues.',
                'icon' => 'fa-solid fa-layer-group',
                'is_system' => false,
                'sort_order' => 13,
            ],
            [
                'slug' => 'seedance_audio_direction_enabled',
                'name' => 'Seedance Audio Direction',
                'category' => 'animation',
                'description' => 'When enabled, generates context-aware audio direction (e.g. "Only ambient rain") instead of brute-force anti-speech suffix.',
                'value_type' => 'boolean',
                'value' => 'true',
                'default_value' => 'true',
                'input_type' => 'checkbox',
                'input_help' => 'Produces more natural audio by describing the sound environment.',
                'icon' => 'fa-solid fa-headphones',
                'is_system' => false,
                'sort_order' => 14,
            ],
            [
                'slug' => 'seedance_max_duration_v2',
                'name' => 'Seedance v2.0 Max Duration',
                'category' => 'animation',
                'description' => 'Maximum video duration in seconds for Seedance v2.0.',
                'value_type' => 'integer',
                'value' => '20',
                'default_value' => '20',
                'min_value' => 4,
                'max_value' => 20,
                'input_type' => 'number',
                'input_help' => 'v2.0 supports up to 20 seconds. v1.5 max is 12 seconds.',
                'icon' => 'fa-solid fa-clock',
                'is_system' => false,
                'sort_order' => 15,
            ],
            [
                'slug' => 'seedance_default_visual_style',
                'name' => 'Default Visual Style',
                'category' => 'animation',
                'description' => 'Default Seedance visual style slug applied to prompts.',
                'value_type' => 'string',
                'value' => 'cinematic',
                'default_value' => 'cinematic',
                'input_type' => 'text',
                'input_help' => 'Slug from Seedance Styles table (visual category).',
                'icon' => 'fa-solid fa-palette',
                'is_system' => false,
                'sort_order' => 16,
            ],
            [
                'slug' => 'seedance_default_lighting',
                'name' => 'Default Lighting Style',
                'category' => 'animation',
                'description' => 'Default Seedance lighting style slug applied to prompts.',
                'value_type' => 'string',
                'value' => 'natural-window-light',
                'default_value' => 'natural-window-light',
                'input_type' => 'text',
                'input_help' => 'Slug from Seedance Styles table (lighting category).',
                'icon' => 'fa-solid fa-sun',
                'is_system' => false,
                'sort_order' => 17,
            ],
            [
                'slug' => 'seedance_default_color_treatment',
                'name' => 'Default Color Treatment',
                'category' => 'animation',
                'description' => 'Default Seedance color treatment slug. Leave empty for none.',
                'value_type' => 'string',
                'value' => '',
                'default_value' => '',
                'input_type' => 'text',
                'input_help' => 'Slug from Seedance Styles table (color category). Empty = no color treatment.',
                'icon' => 'fa-solid fa-droplet',
                'is_system' => false,
                'sort_order' => 18,
            ],

            // =============================================
            // SEEDANCE PIPELINE CONFIGURATION (Admin-editable)
            // These settings expose hardcoded prompt-building
            // data from SeedancePromptService for admin editing.
            // =============================================
            [
                'slug' => 'seedance_technical_rules',
                'name' => 'Seedance Technical Rules',
                'category' => 'animation',
                'description' => 'The full technical rules text injected into Seedance prompts. Controls how AI generates video prompt instructions (motion, dialogue, camera, banned patterns, etc.).',
                'value_type' => 'string',
                'value' => 'SEEDANCE VIDEO PROMPT RULES:

ADVERBS — Use natural, descriptive adverbs freely:
- High intensity: rapidly, violently, crazily, intensely, aggressively, wildly, fiercely, powerfully
- Medium intensity: slowly, gently, steadily, smoothly, carefully, cautiously
- Temporal: suddenly, immediately, then, finally, instantly
- Place adverbs BEFORE or AFTER verbs naturally. Write as you would narrate the scene.

EXPLICIT MOTION — Seedance CANNOT infer motion:
Every movement must be EXPLICITLY described. The model will NOT animate what you don\'t write.
WRONG: "the cat attacks" (too vague — HOW does it attack?)
RIGHT: "the cat slaps the man\'s face with its right paw"
If a body part should move, DESCRIBE the motion. If an object should fly, DESCRIBE the trajectory.

DIALOGUE & SOUNDS — INCLUDE THEM:
- Include character dialogue in quotes: yells "Get off me!"
- Include character sounds: meows, yells, screams, growls, hisses
- Include environmental sounds caused by actions: crashes, clattering, shattering
- These help Seedance generate accurate audio and mouth movements.

CAMERA STYLE — Describe when relevant:
- "A chaotic, shaking handheld camera follows the action"
- "Smooth tracking shot" or "Static wide shot"
- Camera style helps set the visual tone.
- Avoid conflicting camera directions in the same prompt.

PHYSICAL ACTION — SPECIFIC BODY PARTS:
GOOD: "slaps the man\'s face with its right paw"
GOOD: "lands violently on the man\'s left shoulder, its claws gripping wildly"
BAD: "the cat attacks him" (which body part? what motion? what gets hit?)

MULTIPLE SUBJECTS — Handle explicitly:
- Name or describe each subject clearly: "The man in the hat" vs "the woman in red"
- Describe each subject\'s action separately when multiple subjects are present.

OBJECT DISPLACEMENT — ALWAYS INCLUDE:
When characters interact with objects during action, describe what happens.

FACE & IDENTITY PRESERVATION:
- Do NOT add face/identity prefix text — the source IMAGE defines the face.
- NEVER describe face structure changes.
- You may mention mouth opening for SPEAKING or SOUND PRODUCTION.

STYLE ANCHOR — ALWAYS end with: "Cinematic, photorealistic."

BANNED:
- No semicolons
- No appearance/clothing descriptions
- No facial micro-expression descriptions
- No passive voice — only active verbs
- No weak/generic verbs: "goes", "moves", "does", "gets", "starts", "begins"
- ABSOLUTELY NO background music descriptions.',
                'default_value' => null,
                'input_type' => 'textarea',
                'input_help' => 'Full Seedance prompt rules. Edit to fine-tune video generation quality. Changes apply to all new animations.',
                'icon' => 'fa-solid fa-scroll',
                'is_system' => false,
                'sort_order' => 20,
            ],
            [
                'slug' => 'seedance_action_fallbacks',
                'name' => 'Action Fallback Library',
                'category' => 'animation',
                'description' => 'JSON map of shot types to fallback action phrases. Used when AI decomposition doesn\'t provide a specific subjectAction for a shot.',
                'value_type' => 'json',
                'value' => json_encode([
                    'establishing'     => ['surveys the landscape', 'enters the scene slowly', 'approaches from the distance'],
                    'extreme-wide'     => ['stands in the vast space', 'moves through the environment', 'emerges from the distance'],
                    'wide'             => ['walks forward deliberately', 'crosses the open space', 'stands at the edge'],
                    'full'             => ['walks forward with purpose', 'stands facing the scene', 'pauses mid-stride'],
                    'medium'           => ['turns to face the light', 'reaches for an object', 'leans against the surface'],
                    'medium-close'     => ['pauses mid-motion', 'glances over one shoulder', 'lifts a hand slowly'],
                    'close-up'         => ['breathes steadily', 'blinks slowly', 'tilts head to one side'],
                    'extreme-close-up' => ['leans forward, eyes fixed on the object', 'swallows nervously', 'narrows eyes slightly'],
                    'reaction'         => ['freezes momentarily', 'steps back suddenly', 'inhales sharply'],
                    'detail'           => ['rotates slowly in the light', 'rests on the surface', 'catches the light'],
                    'pov'              => ['scans the environment', 'moves through the doorway', 'looks down at hands'],
                    'over-shoulder'    => ['speaks while gesturing', 'listens intently', 'nods slowly'],
                ], JSON_PRETTY_PRINT),
                'default_value' => null,
                'input_type' => 'json_editor',
                'input_help' => 'Each shot type maps to an array of 3 fallback actions. One is randomly selected when no specific action is provided.',
                'icon' => 'fa-solid fa-person-running',
                'is_system' => false,
                'sort_order' => 21,
            ],
            [
                'slug' => 'seedance_ambient_cue_map',
                'name' => 'Ambient Cue Map',
                'category' => 'animation',
                'description' => 'JSON map of keywords to ambient sound descriptions. When a keyword is found in the shot description, the corresponding ambient sound is used in the audio direction.',
                'value_type' => 'json',
                'value' => json_encode([
                    'rain'      => 'ambient rain and distant thunder',
                    'storm'     => 'thunder and heavy rainfall',
                    'wind'      => 'natural wind and rustling',
                    'ocean'     => 'ocean waves and seagulls',
                    'sea'       => 'ocean waves crashing',
                    'beach'     => 'waves and wind on sand',
                    'forest'    => 'birds and rustling leaves',
                    'city'      => 'distant traffic and urban hum',
                    'street'    => 'footsteps and ambient city noise',
                    'office'    => 'quiet keyboard clicks and air conditioning hum',
                    'kitchen'   => 'sizzling and clinking dishes',
                    'fire'      => 'crackling fire',
                    'night'     => 'crickets and distant nighttime ambiance',
                    'snow'      => 'quiet crunching snow underfoot',
                    'desert'    => 'wind over sand and distant silence',
                    'water'     => 'flowing water and gentle splashing',
                    'garden'    => 'birds chirping and gentle breeze',
                    'crowd'     => 'murmuring crowd ambiance',
                    'car'       => 'engine hum and road noise',
                    'church'    => 'quiet reverberant space',
                    'hospital'  => 'quiet beeping monitors and soft footsteps',
                    'warehouse' => 'echoing footsteps in empty space',
                ], JSON_PRETTY_PRINT),
                'default_value' => null,
                'input_type' => 'json_editor',
                'input_help' => 'Add keywords and their ambient sound descriptions. Up to 2 matching cues are included in audio direction.',
                'icon' => 'fa-solid fa-ear-listen',
                'is_system' => false,
                'sort_order' => 22,
            ],
            [
                'slug' => 'seedance_shot_size_map',
                'name' => 'Shot Type → Size Mapping',
                'category' => 'animation',
                'description' => 'JSON map of internal shot type slugs to Seedance shot size labels used in the Camera part of prompts.',
                'value_type' => 'json',
                'value' => json_encode([
                    'establishing'     => 'Wide shot',
                    'extreme-wide'     => 'Wide shot',
                    'wide'             => 'Wide shot',
                    'full'             => 'Full shot',
                    'medium'           => 'Medium shot',
                    'medium-close'     => 'Medium close-up',
                    'close-up'         => 'Close-up',
                    'extreme-close-up' => 'Extreme close-up',
                    'reaction'         => 'Close-up',
                    'detail'           => 'Extreme close-up',
                    'pov'              => 'POV shot',
                    'over-shoulder'    => 'Over-the-shoulder',
                ], JSON_PRETTY_PRINT),
                'default_value' => null,
                'input_type' => 'json_editor',
                'input_help' => 'Maps decomposition shot type slugs to Seedance-friendly camera shot size labels.',
                'icon' => 'fa-solid fa-expand',
                'is_system' => false,
                'sort_order' => 23,
            ],
            [
                'slug' => 'seedance_style_anchor',
                'name' => 'Style Anchor Text',
                'category' => 'animation',
                'description' => 'Default style anchor appended to prompts when no visual style is matched. Also used as fallback in the Style part.',
                'value_type' => 'string',
                'value' => 'Cinematic, photorealistic',
                'default_value' => 'Cinematic, photorealistic',
                'input_type' => 'text',
                'input_help' => 'Short style descriptor injected into every prompt. Change to alter the base visual look.',
                'icon' => 'fa-solid fa-palette',
                'is_system' => false,
                'sort_order' => 24,
            ],
            [
                'slug' => 'seedance_audio_fallback_text',
                'name' => 'Audio Fallback Text',
                'category' => 'animation',
                'description' => 'Default audio direction text when no ambient cues are detected and audio direction is disabled.',
                'value_type' => 'string',
                'value' => 'Ambient sound only.',
                'default_value' => 'Ambient sound only.',
                'input_type' => 'text',
                'input_help' => 'Fallback audio instruction when no environmental context is available.',
                'icon' => 'fa-solid fa-volume-low',
                'is_system' => false,
                'sort_order' => 25,
            ],
            [
                'slug' => 'seedance_sanitize_patterns',
                'name' => 'Sanitization Patterns',
                'category' => 'animation',
                'description' => 'JSON object with regex patterns grouped by phase: compounds, passive_verbs, facial_patterns, appearance_patterns, adverbs_to_deduplicate. Used to clean prompts for Seedance compliance.',
                'value_type' => 'json',
                'value' => json_encode([
                    'compounds' => [
                        'razor[\\s-]*sharp' => 'sharp',
                        'razor\\s+claws' => 'sharp claws',
                    ],
                    'passive_verbs' => [
                        'nestled' => 'pressing',
                        'nestling' => 'pressing',
                        'begins to' => '',
                        'starts to' => '',
                    ],
                    'facial_patterns' => [
                        ',?\\s*\\beyes?\\s+(?:crinkling|crinkel|crinkle|crinkled|widening|widen|widened|narrowing|narrow|narrowed|squinting|squint|twinkling|twinkle|sparkling|sparkle|gleaming|gleam|glinting|glint)\\s*\\w*' => '',
                        ',?\\s*\\beyes?\\s+wide\\s*\\w*' => '',
                        '\\bbrows?\\s+(?:furrowing|furrowed|knitting|knitted|raised|raising)\\b' => '',
                        '\\bjaws?\\s+(?:clenching|clenched|dropping|dropped|setting|set)\\b' => '',
                        '\\bin\\s+(?:amusement|delight|horror|disgust|surprise|wonder|disbelief|shock)\\b' => '',
                        '\\bwith\\s+(?:a\\s+)?(?:\\w+\\s+)?(?:glint|grin|smirk|sneer)\\b' => '',
                        ',?\\s*\\b(?:smiles?|smiled|smiling)\\s+\\w*\\s*(?:with\\s+\\w+)?' => '',
                        ',?\\s*\\bface\\s+(?:transforms?|changes?|shifts?|contorts?|morphs?|lights?\\s+up)\\s*\\w*[^,.]*[.,]?' => '',
                        '\\bmouth\\s+(?:forms?|makes?|creates?)\\s+(?:a?\\s*)?(?:shape|circle|oval|o\\b)[^,.]*[.,]?' => 'mouth opens',
                        '\\bwith\\s+(?:joy|delight|glee|satisfaction|pleasure|excitement|enthusiasm|pride|happiness)\\b' => 'powerfully',
                        ',?\\s*\\bface\\s+(?:brightens?|glows?|beams?|softens?|hardens?|relaxes?|tenses?|scrunches?|crumples?|falls?)\\b[^,.]*[.,]?' => '',
                        ',?\\s*\\blooks?\\s+(?:satisfied|happy|pleased|guilty|innocent|content|proud|sad|angry|worried|confused|surprised|shocked|terrified|bored|amused|annoyed|disgusted|excited)\\b[^,.]*[.,]?' => '',
                    ],
                    'appearance_patterns' => [
                        ',?\\s*wrapped\\s+(?:from|around)\\s+[^,.]+' => '',
                        ',?\\s*(?:wearing|dressed\\s+in|clad\\s+in)\\s+[^,.]+' => '',
                        '\\b(?:brightly|dimly|softly|warmly|harshly)\\s+lit\\b' => '',
                        '\\bbright\\s+(?=\\w)' => '',
                    ],
                    'adverbs_to_deduplicate' => ['crazily', 'violently', 'rapidly', 'intensely', 'slowly', 'gently', 'steadily', 'smoothly'],
                ], JSON_PRETTY_PRINT),
                'default_value' => null,
                'input_type' => 'json_editor',
                'input_help' => 'Regex patterns for prompt sanitization. Keys: compounds, passive_verbs, facial_patterns, appearance_patterns, adverbs_to_deduplicate. Patterns use PHP regex syntax without delimiters.',
                'icon' => 'fa-solid fa-broom',
                'is_system' => false,
                'sort_order' => 26,
            ],

            // =============================================
            // DURATION SETTINGS
            // =============================================
            [
                'slug' => 'duration_shot_min',
                'name' => 'Minimum Shot Duration',
                'category' => 'duration',
                'description' => 'Minimum duration for any individual shot (in seconds).',
                'value_type' => 'integer',
                'value' => '3',
                'default_value' => '3',
                'min_value' => 1,
                'max_value' => 10,
                'input_type' => 'number',
                'input_help' => 'Very short shots (under 3s) may feel too rushed',
                'icon' => 'fa-solid fa-hourglass-start',
                'is_system' => true,
                'sort_order' => 1,
            ],
            [
                'slug' => 'duration_shot_max',
                'name' => 'Maximum Shot Duration',
                'category' => 'duration',
                'description' => 'Maximum duration for any individual shot (in seconds).',
                'value_type' => 'integer',
                'value' => '20',
                'default_value' => '20',
                'min_value' => 5,
                'max_value' => 60,
                'input_type' => 'number',
                'input_help' => 'Long shots are supported by Seedance for extended scenes',
                'icon' => 'fa-solid fa-hourglass-end',
                'is_system' => true,
                'sort_order' => 2,
            ],
            [
                'slug' => 'duration_shot_default',
                'name' => 'Default Shot Duration',
                'category' => 'duration',
                'description' => 'Default duration when not specified by AI or user.',
                'value_type' => 'integer',
                'value' => '6',
                'default_value' => '6',
                'min_value' => 3,
                'max_value' => 20,
                'input_type' => 'number',
                'input_help' => '6 seconds is optimal for most shot types',
                'icon' => 'fa-solid fa-stopwatch',
                'is_system' => true,
                'sort_order' => 3,
            ],
            [
                'slug' => 'duration_per_shot_enabled',
                'name' => 'Enable Per-Shot Duration',
                'category' => 'duration',
                'description' => 'Allow different durations for each shot within a scene (vs. uniform duration).',
                'value_type' => 'boolean',
                'value' => 'true',
                'default_value' => 'true',
                'input_type' => 'checkbox',
                'input_help' => 'When enabled, each shot can have its own duration based on content',
                'icon' => 'fa-solid fa-sliders',
                'is_system' => true,
                'sort_order' => 4,
            ],

            // =============================================
            // SCENE PROCESSING SETTINGS
            // =============================================
            [
                'slug' => 'scene_duration_min',
                'name' => 'Minimum Scene Duration',
                'category' => 'scene',
                'description' => 'Minimum duration for any scene (in seconds).',
                'value_type' => 'integer',
                'value' => '10',
                'default_value' => '10',
                'min_value' => 5,
                'max_value' => 30,
                'input_type' => 'number',
                'input_help' => 'Scenes shorter than this may not have enough content',
                'icon' => 'fa-solid fa-minimize',
                'is_system' => true,
                'sort_order' => 1,
            ],
            [
                'slug' => 'scene_duration_max',
                'name' => 'Maximum Scene Duration',
                'category' => 'scene',
                'description' => 'Maximum duration for any scene (in seconds).',
                'value_type' => 'integer',
                'value' => '60',
                'default_value' => '60',
                'min_value' => 15,
                'max_value' => 300,
                'input_type' => 'number',
                'input_help' => 'Very long scenes should be split into multiple scenes',
                'icon' => 'fa-solid fa-maximize',
                'is_system' => true,
                'sort_order' => 2,
            ],
            [
                'slug' => 'scene_duration_default',
                'name' => 'Default Scene Duration',
                'category' => 'scene',
                'description' => 'Default duration when generating new scenes.',
                'value_type' => 'integer',
                'value' => '15',
                'default_value' => '15',
                'min_value' => 10,
                'max_value' => 60,
                'input_type' => 'number',
                'input_help' => '15 seconds provides good balance of content and pacing',
                'icon' => 'fa-solid fa-clock',
                'is_system' => true,
                'sort_order' => 3,
            ],
            [
                'slug' => 'scene_auto_decompose',
                'name' => 'Auto-Decompose Scenes',
                'category' => 'scene',
                'description' => 'Automatically decompose scenes into shots when entering animation phase.',
                'value_type' => 'boolean',
                'value' => 'false',
                'default_value' => 'false',
                'input_type' => 'checkbox',
                'input_help' => 'When enabled, all scenes are automatically decomposed without manual trigger',
                'icon' => 'fa-solid fa-wand-magic',
                'is_system' => true,
                'sort_order' => 4,
            ],

            // =============================================
            // GENERAL WIZARD SETTINGS
            // =============================================
            [
                'slug' => 'frame_chaining_enabled',
                'name' => 'Enable Frame Chaining',
                'category' => 'general',
                'description' => 'Use last frame of previous shot as starting frame for next shot (ensures visual continuity).',
                'value_type' => 'boolean',
                'value' => 'true',
                'default_value' => 'true',
                'input_type' => 'checkbox',
                'input_help' => 'Recommended for professional-looking shot transitions',
                'icon' => 'fa-solid fa-link',
                'is_system' => true,
                'sort_order' => 1,
            ],
            [
                'slug' => 'style_bible_enforcement',
                'name' => 'Style Bible Enforcement Level',
                'category' => 'general',
                'description' => 'How strictly to apply Style Bible settings to generated content.',
                'value_type' => 'string',
                'value' => 'moderate',
                'default_value' => 'moderate',
                'allowed_values' => ['strict', 'moderate', 'loose'],
                'input_type' => 'select',
                'input_help' => 'Strict: exact match required, Moderate: balanced, Loose: general guidance',
                'icon' => 'fa-solid fa-palette',
                'is_system' => true,
                'sort_order' => 2,
            ],
            [
                'slug' => 'parallel_generation_limit',
                'name' => 'Parallel Generation Limit',
                'category' => 'general',
                'description' => 'Maximum number of shots/images to generate in parallel.',
                'value_type' => 'integer',
                'value' => '3',
                'default_value' => '3',
                'min_value' => 1,
                'max_value' => 10,
                'input_type' => 'number',
                'input_help' => 'Higher values speed up generation but may hit API rate limits',
                'icon' => 'fa-solid fa-layer-group',
                'is_system' => true,
                'sort_order' => 3,
            ],

            // =============================================
            // API ENDPOINTS SETTINGS
            // =============================================
            [
                'slug' => 'api_runpod_key',
                'name' => 'RunPod API Key',
                'category' => 'api',
                'description' => 'API key for RunPod serverless endpoints (HiDream, Kokoro TTS, etc.).',
                'value_type' => 'string',
                'value' => '',
                'default_value' => '',
                'input_type' => 'password',
                'input_help' => 'Get your API key from runpod.io dashboard',
                'icon' => 'fa-solid fa-key',
                'is_system' => true,
                'sort_order' => 1,
            ],
            [
                'slug' => 'api_runpod_kokoro_tts_endpoint',
                'name' => 'RunPod Kokoro TTS Endpoint',
                'category' => 'api',
                'description' => 'RunPod serverless endpoint URL for Kokoro TTS high-quality voice generation.',
                'value_type' => 'string',
                'value' => '',
                'default_value' => '',
                'input_type' => 'text',
                'input_help' => 'Format: https://api.runpod.ai/v2/{endpoint_id} (e.g., pzi4079jucgobi)',
                'icon' => 'fa-solid fa-microphone',
                'is_system' => true,
                'sort_order' => 3,
            ],
            [
                'slug' => 'api_runpod_hidream_endpoint',
                'name' => 'RunPod HiDream Endpoint',
                'category' => 'api',
                'description' => 'RunPod serverless endpoint URL for HiDream image generation.',
                'value_type' => 'string',
                'value' => '',
                'default_value' => '',
                'input_type' => 'text',
                'input_help' => 'Format: https://api.runpod.ai/v2/{endpoint_id}/run',
                'icon' => 'fa-solid fa-image',
                'is_system' => true,
                'sort_order' => 4,
            ],

            // =============================================
            // CREDIT COSTS SETTINGS
            // =============================================
            [
                'slug' => 'credits_script_generation',
                'name' => 'Script Generation Cost',
                'category' => 'credits',
                'description' => 'Credits charged for generating a new script.',
                'value_type' => 'integer',
                'value' => '5',
                'default_value' => '5',
                'min_value' => 0,
                'max_value' => 100,
                'input_type' => 'number',
                'input_help' => 'Cost per script generation request',
                'icon' => 'fa-solid fa-scroll',
                'is_system' => true,
                'sort_order' => 1,
            ],
            [
                'slug' => 'credits_image_generation',
                'name' => 'Image Generation Cost',
                'category' => 'credits',
                'description' => 'Credits charged for generating a single image.',
                'value_type' => 'integer',
                'value' => '3',
                'default_value' => '3',
                'min_value' => 0,
                'max_value' => 50,
                'input_type' => 'number',
                'input_help' => 'Cost per image generation',
                'icon' => 'fa-solid fa-image',
                'is_system' => true,
                'sort_order' => 2,
            ],
            [
                'slug' => 'credits_voiceover_generation',
                'name' => 'Voiceover Generation Cost',
                'category' => 'credits',
                'description' => 'Credits charged for generating voiceover audio.',
                'value_type' => 'integer',
                'value' => '2',
                'default_value' => '2',
                'min_value' => 0,
                'max_value' => 50,
                'input_type' => 'number',
                'input_help' => 'Cost per voiceover generation',
                'icon' => 'fa-solid fa-microphone',
                'is_system' => true,
                'sort_order' => 3,
            ],
            [
                'slug' => 'credits_video_animation',
                'name' => 'Video Animation Cost',
                'category' => 'credits',
                'description' => 'Credits charged for animating a single shot/image.',
                'value_type' => 'integer',
                'value' => '10',
                'default_value' => '10',
                'min_value' => 0,
                'max_value' => 100,
                'input_type' => 'number',
                'input_help' => 'Cost per video animation (Seedance)',
                'icon' => 'fa-solid fa-video',
                'is_system' => true,
                'sort_order' => 4,
            ],
            [
                'slug' => 'credits_video_export',
                'name' => 'Video Export Cost',
                'category' => 'credits',
                'description' => 'Credits charged for exporting final video.',
                'value_type' => 'integer',
                'value' => '15',
                'default_value' => '15',
                'min_value' => 0,
                'max_value' => 100,
                'input_type' => 'number',
                'input_help' => 'Cost for final video rendering and export',
                'icon' => 'fa-solid fa-file-export',
                'is_system' => true,
                'sort_order' => 5,
            ],
            [
                'slug' => 'credits_concept_improvement',
                'name' => 'Concept Improvement Cost',
                'category' => 'credits',
                'description' => 'Credits charged for AI concept improvement.',
                'value_type' => 'integer',
                'value' => '3',
                'default_value' => '3',
                'min_value' => 0,
                'max_value' => 50,
                'input_type' => 'number',
                'input_help' => 'Cost per concept improvement request',
                'icon' => 'fa-solid fa-lightbulb',
                'is_system' => true,
                'sort_order' => 6,
            ],

            // =============================================
            // AI PROVIDER SETTINGS
            // =============================================
            [
                'slug' => 'ai_script_provider',
                'name' => 'Script Generation Provider',
                'category' => 'ai_providers',
                'description' => 'AI provider to use for script generation.',
                'value_type' => 'string',
                'value' => 'openai',
                'default_value' => 'openai',
                'allowed_values' => ['openai', 'grok', 'gemini', 'anthropic'],
                'input_type' => 'select',
                'input_help' => 'Select which AI provider generates scripts',
                'icon' => 'fa-solid fa-brain',
                'is_system' => true,
                'sort_order' => 1,
            ],
            [
                'slug' => 'ai_script_model',
                'name' => 'Script Generation Model',
                'category' => 'ai_providers',
                'description' => 'Fallback AI model for script generation. VwPrompt model field takes precedence when set.',
                'value_type' => 'string',
                'value' => 'gpt-4',
                'default_value' => 'gpt-4',
                'input_type' => 'text',
                'input_help' => 'Model name (e.g., gpt-4, gpt-4-turbo, claude-3-opus)',
                'icon' => 'fa-solid fa-microchip',
                'is_system' => true,
                'sort_order' => 2,
            ],
            [
                'slug' => 'ai_shot_analysis_provider',
                'name' => 'Shot Analysis Provider',
                'category' => 'ai_providers',
                'description' => 'AI provider to use for shot intelligence analysis.',
                'value_type' => 'string',
                'value' => 'openai',
                'default_value' => 'openai',
                'allowed_values' => ['openai', 'grok', 'gemini', 'anthropic'],
                'input_type' => 'select',
                'input_help' => 'Provider for AI shot decomposition analysis',
                'icon' => 'fa-solid fa-magnifying-glass-chart',
                'is_system' => true,
                'sort_order' => 3,
            ],
            [
                'slug' => 'ai_shot_analysis_model',
                'name' => 'Shot Analysis Model',
                'category' => 'ai_providers',
                'description' => 'AI model to use for shot intelligence analysis.',
                'value_type' => 'string',
                'value' => 'gpt-4',
                'default_value' => 'gpt-4',
                'input_type' => 'text',
                'input_help' => 'Recommend GPT-4 or Claude for complex scene analysis',
                'icon' => 'fa-solid fa-microchip',
                'is_system' => true,
                'sort_order' => 4,
            ],
            [
                'slug' => 'ai_image_provider',
                'name' => 'Image Generation Provider',
                'category' => 'ai_providers',
                'description' => 'Default image generation provider.',
                'value_type' => 'string',
                'value' => 'openai',
                'default_value' => 'openai',
                'allowed_values' => ['openai', 'hidream', 'stability', 'midjourney'],
                'input_type' => 'select',
                'input_help' => 'OpenAI DALL-E, HiDream, Stability AI, etc.',
                'icon' => 'fa-solid fa-paintbrush',
                'is_system' => true,
                'sort_order' => 5,
            ],
            [
                'slug' => 'ai_image_model',
                'name' => 'Image Generation Model',
                'category' => 'ai_providers',
                'description' => 'AI model to use for image generation.',
                'value_type' => 'string',
                'value' => 'dall-e-3',
                'default_value' => 'dall-e-3',
                'input_type' => 'text',
                'input_help' => 'Model name (e.g., dall-e-3, hidream-i1-full)',
                'icon' => 'fa-solid fa-microchip',
                'is_system' => true,
                'sort_order' => 6,
            ],
            [
                'slug' => 'ai_voiceover_provider',
                'name' => 'Voiceover Provider',
                'category' => 'ai_providers',
                'description' => 'TTS provider for voiceover generation.',
                'value_type' => 'string',
                'value' => 'kokoro',
                'default_value' => 'kokoro',
                'allowed_values' => ['kokoro', 'openai', 'elevenlabs', 'google'],
                'input_type' => 'select',
                'input_help' => 'Text-to-speech provider (Kokoro = high quality via RunPod)',
                'icon' => 'fa-solid fa-volume-high',
                'is_system' => true,
                'sort_order' => 7,
            ],
            [
                'slug' => 'ai_voiceover_model',
                'name' => 'Voiceover Model',
                'category' => 'ai_providers',
                'description' => 'TTS model for voiceover generation.',
                'value_type' => 'string',
                'value' => 'tts-1-hd',
                'default_value' => 'tts-1-hd',
                'input_type' => 'text',
                'input_help' => 'Model name (e.g., tts-1-hd, eleven_multilingual_v2)',
                'icon' => 'fa-solid fa-microchip',
                'is_system' => true,
                'sort_order' => 8,
            ],

            // =============================================
            // PRODUCTION INTELLIGENCE SETTINGS
            // =============================================
            [
                'slug' => 'production_auto_multishot_types',
                'name' => 'Auto-Enable Multi-Shot for Production Types',
                'category' => 'production_intelligence',
                'description' => 'Production types that automatically enable Multi-Shot Mode. Comma-separated list.',
                'value_type' => 'string',
                'value' => 'movie,documentary,commercial,music-video',
                'default_value' => 'movie,documentary,commercial,music-video',
                'input_type' => 'text',
                'input_help' => 'E.g., movie,documentary,commercial - these types auto-enable multi-shot decomposition',
                'icon' => 'fa-solid fa-film',
                'is_system' => true,
                'sort_order' => 1,
            ],
            [
                'slug' => 'production_auto_character_bible_types',
                'name' => 'Auto-Enable Character Bible for Production Types',
                'category' => 'production_intelligence',
                'description' => 'Production types that automatically enable Character Bible detection. Comma-separated list.',
                'value_type' => 'string',
                'value' => 'movie,documentary,commercial,narrative',
                'default_value' => 'movie,documentary,commercial,narrative',
                'input_type' => 'text',
                'input_help' => 'E.g., movie,documentary - these types auto-detect and track characters',
                'icon' => 'fa-solid fa-users',
                'is_system' => true,
                'sort_order' => 2,
            ],
            [
                'slug' => 'production_main_char_scene_percent',
                'name' => 'Main Character Scene Percentage',
                'category' => 'production_intelligence',
                'description' => 'Minimum percentage of scenes where Main characters should appear (cinematic continuity).',
                'value_type' => 'integer',
                'value' => '70',
                'default_value' => '70',
                'min_value' => 30,
                'max_value' => 100,
                'input_type' => 'number',
                'input_help' => 'Main characters will be expanded to appear in at least this % of scenes',
                'icon' => 'fa-solid fa-star',
                'is_system' => true,
                'sort_order' => 3,
            ],
            [
                'slug' => 'production_supporting_char_scene_percent',
                'name' => 'Supporting Character Scene Percentage',
                'category' => 'production_intelligence',
                'description' => 'Minimum percentage of scenes where Supporting characters should appear.',
                'value_type' => 'integer',
                'value' => '40',
                'default_value' => '40',
                'min_value' => 10,
                'max_value' => 80,
                'input_type' => 'number',
                'input_help' => 'Supporting characters will be expanded to appear in at least this % of scenes',
                'icon' => 'fa-solid fa-user-group',
                'is_system' => true,
                'sort_order' => 4,
            ],
            [
                'slug' => 'production_portrait_single_person',
                'name' => 'Enforce Single-Person Portraits',
                'category' => 'production_intelligence',
                'description' => 'When enabled, character portrait generation strictly enforces single-person output.',
                'value_type' => 'boolean',
                'value' => 'true',
                'default_value' => 'true',
                'input_type' => 'checkbox',
                'input_help' => 'Adds strong single-person directives to portrait prompts',
                'icon' => 'fa-solid fa-portrait',
                'is_system' => true,
                'sort_order' => 5,
            ],
            [
                'slug' => 'production_auto_location_bible_types',
                'name' => 'Auto-Enable Location Bible for Production Types',
                'category' => 'production_intelligence',
                'description' => 'Production types that automatically enable Location Bible detection. Comma-separated list.',
                'value_type' => 'string',
                'value' => 'movie,documentary,commercial',
                'default_value' => 'movie,documentary,commercial',
                'input_type' => 'text',
                'input_help' => 'E.g., movie,documentary - these types auto-detect and track locations',
                'icon' => 'fa-solid fa-location-dot',
                'is_system' => true,
                'sort_order' => 6,
            ],
            [
                'slug' => 'production_auto_style_bible_types',
                'name' => 'Auto-Enable Style Bible for Production Types',
                'category' => 'production_intelligence',
                'description' => 'Production types that automatically enable Style Bible. Comma-separated list.',
                'value_type' => 'string',
                'value' => 'movie,commercial,music-video',
                'default_value' => 'movie,commercial,music-video',
                'input_type' => 'text',
                'input_help' => 'E.g., movie,commercial - these types auto-enable visual style consistency',
                'icon' => 'fa-solid fa-palette',
                'is_system' => true,
                'sort_order' => 7,
            ],
            [
                'slug' => 'production_narrative_tracking_types',
                'name' => 'Narrative Continuity Tracking Types',
                'category' => 'production_intelligence',
                'description' => 'Production types that use narrative (not literal) character tracking. Comma-separated list.',
                'value_type' => 'string',
                'value' => 'movie,documentary,narrative',
                'default_value' => 'movie,documentary,narrative',
                'input_type' => 'text',
                'input_help' => 'Narrative tracking expands character presence based on story logic, not just mentions',
                'icon' => 'fa-solid fa-book-open',
                'is_system' => true,
                'sort_order' => 8,
            ],
            [
                'slug' => 'production_type_overrides',
                'name' => 'Per-Production-Type Overrides',
                'category' => 'production_intelligence',
                'description' => 'JSON object with custom settings per production type. Overrides global defaults.',
                'value_type' => 'json',
                'value' => '{}',
                'default_value' => '{}',
                'input_type' => 'textarea',
                'input_help' => 'Example: {"movie":{"mainCharScenePercent":80},"commercial":{"mainCharScenePercent":60}}',
                'icon' => 'fa-solid fa-sliders',
                'is_system' => true,
                'sort_order' => 9,
            ],
            // Hollywood Expansion Toggle
            [
                'slug' => 'hollywood_expansion_enabled',
                'name' => 'Hollywood Prompt Expansion',
                'category' => 'production_intelligence',
                'description' => 'Enable AI-enhanced prompts for complex shots. When enabled, shots with multiple characters, unusual settings, or high emotional complexity automatically route to LLM expansion for Hollywood-quality prompts.',
                'value_type' => 'boolean',
                'value' => 'true',
                'default_value' => 'true',
                'input_type' => 'checkbox',
                'input_help' => 'Disable for faster generation with template-only prompts',
                'icon' => 'fa-solid fa-wand-magic-sparkles',
                'is_system' => false,
                'sort_order' => 10,
            ],

            // =============================================
            // CINEMATIC INTELLIGENCE SETTINGS
            // =============================================
            [
                'slug' => 'cinematic_intelligence_enabled',
                'name' => 'Enable Cinematic Intelligence',
                'category' => 'cinematic_intelligence',
                'description' => 'Master toggle for all Hollywood-level cinematic intelligence features.',
                'value_type' => 'boolean',
                'value' => 'true',
                'default_value' => 'true',
                'input_type' => 'checkbox',
                'input_help' => 'Enables character state tracking, emotional arcs, wardrobe continuity, and more',
                'icon' => 'fa-solid fa-clapperboard',
                'is_system' => true,
                'sort_order' => 1,
            ],
            [
                'slug' => 'character_state_tracking_enabled',
                'name' => 'Character State Tracking',
                'category' => 'cinematic_intelligence',
                'description' => 'Track character states (mood, wardrobe, injuries, props) across all scenes.',
                'value_type' => 'boolean',
                'value' => 'true',
                'default_value' => 'true',
                'input_type' => 'checkbox',
                'input_help' => 'Ensures continuity by propagating state changes through scenes',
                'icon' => 'fa-solid fa-user-check',
                'is_system' => true,
                'sort_order' => 2,
            ],
            [
                'slug' => 'emotional_arc_enabled',
                'name' => 'Emotional Arc Engine',
                'category' => 'cinematic_intelligence',
                'description' => 'Auto-generate emotional arcs for characters based on role and genre.',
                'value_type' => 'boolean',
                'value' => 'true',
                'default_value' => 'true',
                'input_type' => 'checkbox',
                'input_help' => 'Creates a hero journey emotional progression across scenes',
                'icon' => 'fa-solid fa-heart-pulse',
                'is_system' => true,
                'sort_order' => 3,
            ],
            [
                'slug' => 'wardrobe_continuity_enabled',
                'name' => 'Wardrobe Continuity Validation',
                'category' => 'cinematic_intelligence',
                'description' => 'Validate wardrobe consistency across consecutive scenes.',
                'value_type' => 'boolean',
                'value' => 'true',
                'default_value' => 'true',
                'input_type' => 'checkbox',
                'input_help' => 'Flags unexpected wardrobe changes between scenes',
                'icon' => 'fa-solid fa-shirt',
                'is_system' => true,
                'sort_order' => 4,
            ],
            [
                'slug' => 'location_character_binding_enabled',
                'name' => 'Location-Character Auto-Binding',
                'category' => 'cinematic_intelligence',
                'description' => 'Infer character presence based on location continuity between scenes.',
                'value_type' => 'boolean',
                'value' => 'true',
                'default_value' => 'true',
                'input_type' => 'checkbox',
                'input_help' => 'If character was at location X in scene N, suggests presence in scene N+1 at same location',
                'icon' => 'fa-solid fa-location-crosshairs',
                'is_system' => true,
                'sort_order' => 5,
            ],
            [
                'slug' => 'shot_type_rules_enabled',
                'name' => 'Shot-Type Character Rules',
                'category' => 'cinematic_intelligence',
                'description' => 'Enforce shot-type specific character limits (e.g., close-up = 1 person only).',
                'value_type' => 'boolean',
                'value' => 'true',
                'default_value' => 'true',
                'input_type' => 'checkbox',
                'input_help' => 'Validates character counts per shot type for professional framing',
                'icon' => 'fa-solid fa-camera',
                'is_system' => true,
                'sort_order' => 6,
            ],
            [
                'slug' => 'scene_transition_intelligence_enabled',
                'name' => 'Scene Transition Intelligence',
                'category' => 'cinematic_intelligence',
                'description' => 'Auto-classify scene types and suggest optimal shot sequences.',
                'value_type' => 'boolean',
                'value' => 'true',
                'default_value' => 'true',
                'input_type' => 'checkbox',
                'input_help' => 'Identifies dialogue, action, emotional, flashback scenes and recommends shots',
                'icon' => 'fa-solid fa-right-left',
                'is_system' => true,
                'sort_order' => 7,
            ],
            [
                'slug' => 'reference_image_chain_enabled',
                'name' => 'Reference Image Chain',
                'category' => 'cinematic_intelligence',
                'description' => 'Build reference image chains for character consistency across scenes.',
                'value_type' => 'boolean',
                'value' => 'true',
                'default_value' => 'true',
                'input_type' => 'checkbox',
                'input_help' => 'Uses first appearance images as reference for subsequent scenes',
                'icon' => 'fa-solid fa-link',
                'is_system' => true,
                'sort_order' => 8,
            ],
            [
                'slug' => 'character_relationship_mapping_enabled',
                'name' => 'Character Relationship Mapping',
                'category' => 'cinematic_intelligence',
                'description' => 'Map relationships between characters for framing suggestions.',
                'value_type' => 'boolean',
                'value' => 'true',
                'default_value' => 'true',
                'input_type' => 'checkbox',
                'input_help' => 'Allies, enemies, romantic, family - affects proximity and body language',
                'icon' => 'fa-solid fa-people-arrows',
                'is_system' => true,
                'sort_order' => 9,
            ],
            [
                'slug' => 'narrative_beat_alignment_enabled',
                'name' => 'Narrative Beat Alignment',
                'category' => 'cinematic_intelligence',
                'description' => 'Assign story beats to scenes (setup, inciting incident, climax, etc.).',
                'value_type' => 'boolean',
                'value' => 'true',
                'default_value' => 'true',
                'input_type' => 'checkbox',
                'input_help' => 'Ensures proper story structure and main character presence at key beats',
                'icon' => 'fa-solid fa-book-open',
                'is_system' => true,
                'sort_order' => 10,
            ],
            [
                'slug' => 'consistency_scoring_enabled',
                'name' => 'Consistency Scoring System',
                'category' => 'cinematic_intelligence',
                'description' => 'Calculate comprehensive consistency scores for projects.',
                'value_type' => 'boolean',
                'value' => 'true',
                'default_value' => 'true',
                'input_type' => 'checkbox',
                'input_help' => 'Provides letter grades (A+ to F) based on character presence, wardrobe, emotional arc, etc.',
                'icon' => 'fa-solid fa-chart-line',
                'is_system' => true,
                'sort_order' => 11,
            ],
            [
                'slug' => 'consistency_score_threshold',
                'name' => 'Minimum Consistency Score',
                'category' => 'cinematic_intelligence',
                'description' => 'Minimum consistency score threshold for warnings (0.0-1.0).',
                'value_type' => 'float',
                'value' => '0.70',
                'default_value' => '0.70',
                'min_value' => 0,
                'max_value' => 1,
                'input_type' => 'number',
                'input_help' => 'Projects below this score will show warnings (0.70 = B- grade)',
                'icon' => 'fa-solid fa-gauge',
                'is_system' => true,
                'sort_order' => 12,
            ],
            [
                'slug' => 'default_genre',
                'name' => 'Default Genre for Emotional Arcs',
                'category' => 'cinematic_intelligence',
                'description' => 'Default genre used for generating emotional arcs when not specified.',
                'value_type' => 'string',
                'value' => 'drama',
                'default_value' => 'drama',
                'allowed_values' => ['drama', 'comedy', 'thriller', 'action', 'horror'],
                'input_type' => 'select',
                'input_help' => 'Different genres have different emotional arc patterns',
                'icon' => 'fa-solid fa-masks-theater',
                'is_system' => true,
                'sort_order' => 13,
            ],

            // =============================================
            // MOTION INTELLIGENCE SETTINGS
            // =============================================
            [
                'slug' => 'motion_intelligence_enabled',
                'name' => 'Enable Motion Intelligence',
                'category' => 'motion_intelligence',
                'description' => 'When enabled, AI will select optimal camera movements based on shot type, emotion, and scene context.',
                'value_type' => 'boolean',
                'value' => 'true',
                'default_value' => 'true',
                'input_type' => 'checkbox',
                'input_help' => 'Automatically suggests camera movements for each shot based on cinematography best practices',
                'icon' => 'fa-solid fa-video',
                'is_system' => true,
                'sort_order' => 1,
            ],
            [
                'slug' => 'movement_stacking_enabled',
                'name' => 'Enable Movement Stacking',
                'category' => 'motion_intelligence',
                'description' => 'Allow combining multiple camera movements (e.g., dolly in + crane up) for complex cinematic motion.',
                'value_type' => 'boolean',
                'value' => 'true',
                'default_value' => 'true',
                'input_type' => 'checkbox',
                'input_help' => 'Based on Higgsfield methodology - stack up to 2-3 movements for professional results',
                'icon' => 'fa-solid fa-layer-group',
                'is_system' => true,
                'sort_order' => 2,
            ],
            [
                'slug' => 'max_stacked_movements',
                'name' => 'Max Stacked Movements',
                'category' => 'motion_intelligence',
                'description' => 'Maximum number of camera movements that can be combined in a single shot.',
                'value_type' => 'integer',
                'value' => '2',
                'default_value' => '2',
                'min_value' => 1,
                'max_value' => 3,
                'input_type' => 'number',
                'input_help' => 'Recommended: 2 for balanced results, 3 for complex professional motion',
                'icon' => 'fa-solid fa-hashtag',
                'is_system' => true,
                'sort_order' => 3,
            ],
            [
                'slug' => 'default_movement_intensity',
                'name' => 'Default Movement Intensity',
                'category' => 'motion_intelligence',
                'description' => 'Default intensity level for camera movements when not specified by context.',
                'value_type' => 'string',
                'value' => 'moderate',
                'default_value' => 'moderate',
                'allowed_values' => ['subtle', 'moderate', 'dynamic', 'intense'],
                'input_type' => 'select',
                'input_help' => 'Subtle: slow/gentle, Moderate: smooth/balanced, Dynamic: energetic, Intense: dramatic',
                'icon' => 'fa-solid fa-gauge',
                'is_system' => true,
                'sort_order' => 4,
            ],
            [
                'slug' => 'auto_select_movement',
                'name' => 'Auto-Select Movement by Shot Type',
                'category' => 'motion_intelligence',
                'description' => 'Automatically select camera movement based on shot type and emotional context.',
                'value_type' => 'boolean',
                'value' => 'true',
                'default_value' => 'true',
                'input_type' => 'checkbox',
                'input_help' => 'When enabled, AI picks the best movement for each shot type automatically',
                'icon' => 'fa-solid fa-wand-magic-sparkles',
                'is_system' => true,
                'sort_order' => 5,
            ],
            [
                'slug' => 'default_camera_movement',
                'name' => 'Default Camera Movement',
                'category' => 'motion_intelligence',
                'description' => 'Default camera movement when no specific movement is recommended.',
                'value_type' => 'string',
                'value' => 'static',
                'default_value' => 'static',
                'input_type' => 'text',
                'input_help' => 'Movement slug to use as fallback (e.g., static, push-in, dolly-in)',
                'icon' => 'fa-solid fa-camera',
                'is_system' => true,
                'sort_order' => 6,
            ],
            [
                'slug' => 'video_prompt_quality_level',
                'name' => 'Video Prompt Quality Level',
                'category' => 'motion_intelligence',
                'description' => 'Default quality level for video animation prompts.',
                'value_type' => 'string',
                'value' => 'cinematic',
                'default_value' => 'cinematic',
                'allowed_values' => ['broadcast', 'cinematic', 'premium', 'social'],
                'input_type' => 'select',
                'input_help' => 'Higher quality = more detailed prompts, premium adds 8K/IMAX markers',
                'icon' => 'fa-solid fa-star',
                'is_system' => true,
                'sort_order' => 7,
            ],
            [
                'slug' => 'video_prompt_include_lighting',
                'name' => 'Include Lighting in Video Prompts',
                'category' => 'motion_intelligence',
                'description' => 'Automatically add lighting descriptions to video animation prompts.',
                'value_type' => 'boolean',
                'value' => 'true',
                'default_value' => 'true',
                'input_type' => 'checkbox',
                'input_help' => 'Adds context-aware lighting descriptions for visual consistency',
                'icon' => 'fa-solid fa-lightbulb',
                'is_system' => true,
                'sort_order' => 8,
            ],
            [
                'slug' => 'video_prompt_include_atmosphere',
                'name' => 'Include Atmosphere in Video Prompts',
                'category' => 'motion_intelligence',
                'description' => 'Add atmospheric/environmental descriptions to video prompts.',
                'value_type' => 'boolean',
                'value' => 'true',
                'default_value' => 'true',
                'input_type' => 'checkbox',
                'input_help' => 'Includes weather, particles, and mood-based atmosphere',
                'icon' => 'fa-solid fa-cloud',
                'is_system' => true,
                'sort_order' => 9,
            ],

            // =============================================
            // SHOT CONTINUITY SETTINGS (Phase 3)
            // =============================================
            [
                'slug' => 'shot_continuity_enabled',
                'name' => 'Enable Shot Continuity System',
                'category' => 'shot_continuity',
                'description' => 'Master toggle for shot continuity analysis and suggestions. Ensures professional shot sequencing.',
                'value_type' => 'boolean',
                'value' => 'true',
                'default_value' => 'true',
                'input_type' => 'checkbox',
                'input_help' => 'Analyzes shot sequences for compatibility, 30-degree rule, and movement continuity',
                'icon' => 'fa-solid fa-link',
                'is_system' => true,
                'sort_order' => 1,
            ],
            [
                'slug' => 'shot_continuity_min_score',
                'name' => 'Minimum Continuity Score',
                'category' => 'shot_continuity',
                'description' => 'Minimum compatibility score (0-100) before showing warnings about awkward transitions.',
                'value_type' => 'integer',
                'value' => '60',
                'default_value' => '60',
                'min_value' => 0,
                'max_value' => 100,
                'input_type' => 'number',
                'input_help' => 'Transitions scoring below this threshold will be flagged for review',
                'icon' => 'fa-solid fa-gauge',
                'is_system' => true,
                'sort_order' => 2,
            ],
            [
                'slug' => 'shot_continuity_30_degree_rule',
                'name' => 'Enforce 30-Degree Rule',
                'category' => 'shot_continuity',
                'description' => 'Warn when consecutive shots of same size don\'t have significant angle change.',
                'value_type' => 'boolean',
                'value' => 'true',
                'default_value' => 'true',
                'input_type' => 'checkbox',
                'input_help' => 'Classic filmmaking rule: camera should move at least 30 degrees between similar shots',
                'icon' => 'fa-solid fa-rotate',
                'is_system' => true,
                'sort_order' => 3,
            ],
            [
                'slug' => 'shot_continuity_auto_optimize',
                'name' => 'Auto-Optimize Shot Sequences',
                'category' => 'shot_continuity',
                'description' => 'Automatically insert transition shots when incompatible shots are detected.',
                'value_type' => 'boolean',
                'value' => 'false',
                'default_value' => 'false',
                'input_type' => 'checkbox',
                'input_help' => 'When enabled, the system will suggest and can auto-insert cutaways or reaction shots',
                'icon' => 'fa-solid fa-wand-magic-sparkles',
                'is_system' => true,
                'sort_order' => 4,
            ],
            [
                'slug' => 'shot_continuity_coverage_patterns',
                'name' => 'Enable Coverage Pattern Suggestions',
                'category' => 'shot_continuity',
                'description' => 'Suggest professional coverage patterns based on scene type (dialogue, action, etc.).',
                'value_type' => 'boolean',
                'value' => 'true',
                'default_value' => 'true',
                'input_type' => 'checkbox',
                'input_help' => 'Dialogue scenes: Master → OTS A → OTS B → CU A → CU B pattern',
                'icon' => 'fa-solid fa-list-check',
                'is_system' => true,
                'sort_order' => 5,
            ],
            [
                'slug' => 'shot_continuity_movement_flow',
                'name' => 'Check Movement Flow',
                'category' => 'shot_continuity',
                'description' => 'Analyze camera movement continuity between consecutive shots.',
                'value_type' => 'boolean',
                'value' => 'true',
                'default_value' => 'true',
                'input_type' => 'checkbox',
                'input_help' => 'Warns about jarring transitions like intense movement → static (without transition)',
                'icon' => 'fa-solid fa-wind',
                'is_system' => true,
                'sort_order' => 6,
            ],
            [
                'slug' => 'shot_continuity_jump_cut_detection',
                'name' => 'Detect Jump Cuts',
                'category' => 'shot_continuity',
                'description' => 'Flag potential jump cuts (same subject, minor position change) as issues.',
                'value_type' => 'boolean',
                'value' => 'true',
                'default_value' => 'true',
                'input_type' => 'checkbox',
                'input_help' => 'Jump cuts are jarring edits that break continuity (unless used stylistically)',
                'icon' => 'fa-solid fa-scissors',
                'is_system' => true,
                'sort_order' => 7,
            ],
            [
                'slug' => 'shot_continuity_default_scene_type',
                'name' => 'Default Scene Type',
                'category' => 'shot_continuity',
                'description' => 'Default scene type for coverage pattern suggestions when not detected.',
                'value_type' => 'string',
                'value' => 'dialogue',
                'default_value' => 'dialogue',
                'allowed_values' => ['dialogue', 'action', 'montage', 'emotional', 'establishing'],
                'input_type' => 'select',
                'input_help' => 'Different scene types have different optimal shot patterns',
                'icon' => 'fa-solid fa-film',
                'is_system' => true,
                'sort_order' => 8,
            ],

            // =============================================
            // SCENE DETECTION SETTINGS (Phase 4)
            // =============================================
            [
                'slug' => 'scene_detection_enabled',
                'name' => 'Enable Scene Type Detection',
                'category' => 'scene_detection',
                'description' => 'Master toggle for automatic scene type detection and coverage pattern suggestions.',
                'value_type' => 'boolean',
                'value' => 'true',
                'default_value' => 'true',
                'input_type' => 'checkbox',
                'input_help' => 'Automatically classifies scenes as dialogue, action, emotional, etc.',
                'icon' => 'fa-solid fa-magnifying-glass-chart',
                'is_system' => true,
                'sort_order' => 1,
            ],
            [
                'slug' => 'scene_detection_auto',
                'name' => 'Auto-Detect on Scene Analysis',
                'category' => 'scene_detection',
                'description' => 'Automatically detect scene type when analyzing scenes for shot breakdown.',
                'value_type' => 'boolean',
                'value' => 'true',
                'default_value' => 'true',
                'input_type' => 'checkbox',
                'input_help' => 'When enabled, scene type is detected automatically during shot intelligence analysis',
                'icon' => 'fa-solid fa-robot',
                'is_system' => true,
                'sort_order' => 2,
            ],
            [
                'slug' => 'scene_detection_min_confidence',
                'name' => 'Minimum Detection Confidence',
                'category' => 'scene_detection',
                'description' => 'Minimum confidence score (0-100) required to accept a scene type detection.',
                'value_type' => 'integer',
                'value' => '40',
                'default_value' => '40',
                'min_value' => 0,
                'max_value' => 100,
                'input_type' => 'number',
                'input_help' => 'Lower values detect more scenes but with less accuracy; higher values are more selective',
                'icon' => 'fa-solid fa-gauge',
                'is_system' => true,
                'sort_order' => 3,
            ],
            [
                'slug' => 'scene_detection_default_type',
                'name' => 'Default Scene Type',
                'category' => 'scene_detection',
                'description' => 'Default scene type when detection fails or confidence is too low.',
                'value_type' => 'string',
                'value' => 'dialogue',
                'default_value' => 'dialogue',
                'allowed_values' => ['dialogue', 'action', 'emotional', 'montage', 'establishing'],
                'input_type' => 'select',
                'input_help' => 'Fallback scene type (dialogue is most common in most productions)',
                'icon' => 'fa-solid fa-list',
                'is_system' => true,
                'sort_order' => 4,
            ],
            [
                'slug' => 'scene_detection_use_context',
                'name' => 'Use Contextual Detection',
                'category' => 'scene_detection',
                'description' => 'Consider genre, previous scenes, and story position when detecting scene type.',
                'value_type' => 'boolean',
                'value' => 'true',
                'default_value' => 'true',
                'input_type' => 'checkbox',
                'input_help' => 'Improves accuracy by considering surrounding context',
                'icon' => 'fa-solid fa-diagram-project',
                'is_system' => true,
                'sort_order' => 5,
            ],
            [
                'slug' => 'scene_detection_track_accuracy',
                'name' => 'Track Detection Accuracy',
                'category' => 'scene_detection',
                'description' => 'Track and learn from user corrections to improve detection over time.',
                'value_type' => 'boolean',
                'value' => 'true',
                'default_value' => 'true',
                'input_type' => 'checkbox',
                'input_help' => 'Patterns with better success rates will be prioritized',
                'icon' => 'fa-solid fa-chart-line',
                'is_system' => true,
                'sort_order' => 6,
            ],
            [
                'slug' => 'scene_detection_suggest_alternatives',
                'name' => 'Suggest Alternative Patterns',
                'category' => 'scene_detection',
                'description' => 'Show alternative coverage pattern suggestions alongside the primary detection.',
                'value_type' => 'boolean',
                'value' => 'true',
                'default_value' => 'true',
                'input_type' => 'checkbox',
                'input_help' => 'Shows up to 3 alternative patterns the user can choose from',
                'icon' => 'fa-solid fa-list-check',
                'is_system' => true,
                'sort_order' => 7,
            ],
            [
                'slug' => 'scene_detection_max_alternatives',
                'name' => 'Max Alternative Suggestions',
                'category' => 'scene_detection',
                'description' => 'Maximum number of alternative patterns to suggest.',
                'value_type' => 'integer',
                'value' => '3',
                'default_value' => '3',
                'min_value' => 0,
                'max_value' => 5,
                'input_type' => 'number',
                'input_help' => 'Number of backup options shown to users',
                'icon' => 'fa-solid fa-hashtag',
                'is_system' => true,
                'sort_order' => 8,
            ],

            // =============================================
            // SHOT PROGRESSION SETTINGS (Phase 6)
            // =============================================
            [
                'slug' => 'shot_progression_enabled',
                'name' => 'Enable Shot Progression System',
                'category' => 'shot_progression',
                'description' => 'Master toggle for shot progression analysis. Ensures each shot advances the narrative with unique story beats and actions.',
                'value_type' => 'boolean',
                'value' => 'true',
                'default_value' => 'true',
                'input_type' => 'checkbox',
                'input_help' => 'Uses Tension Curve and Emotional Journey selections to create energy and mood progression',
                'icon' => 'fa-solid fa-diagram-project',
                'is_system' => true,
                'sort_order' => 1,
            ],
            [
                'slug' => 'shot_progression_action_continuity',
                'name' => 'Validate Action Continuity',
                'category' => 'shot_progression',
                'description' => 'Detect and flag consecutive shots with identical or too-similar actions to prevent static sequences.',
                'value_type' => 'boolean',
                'value' => 'true',
                'default_value' => 'true',
                'input_type' => 'checkbox',
                'input_help' => 'Flags shots like "man smiles" → "man smiles" as needing action progression',
                'icon' => 'fa-solid fa-person-walking',
                'is_system' => true,
                'sort_order' => 2,
            ],
            [
                'slug' => 'shot_progression_flag_static',
                'name' => 'Flag Static Shot Sequences',
                'category' => 'shot_progression',
                'description' => 'Show warnings when multiple consecutive shots have the same action description.',
                'value_type' => 'boolean',
                'value' => 'true',
                'default_value' => 'true',
                'input_type' => 'checkbox',
                'input_help' => 'Helps editors identify and fix repetitive shot sequences',
                'icon' => 'fa-solid fa-triangle-exclamation',
                'is_system' => true,
                'sort_order' => 3,
            ],
            [
                'slug' => 'shot_progression_enhance_prompts',
                'name' => 'Enhance Prompts with Progression',
                'category' => 'shot_progression',
                'description' => 'Automatically add story beat, energy level, and mood context to video prompts.',
                'value_type' => 'boolean',
                'value' => 'true',
                'default_value' => 'true',
                'input_type' => 'checkbox',
                'input_help' => 'Adds context like "[Discovery beat, rising energy, hopeful mood]" to prompts',
                'icon' => 'fa-solid fa-wand-magic-sparkles',
                'is_system' => true,
                'sort_order' => 4,
            ],
            [
                'slug' => 'shot_progression_min_score',
                'name' => 'Minimum Progression Score',
                'category' => 'shot_progression',
                'description' => 'Minimum progression quality score (0-100) before showing warnings about weak narrative flow.',
                'value_type' => 'integer',
                'value' => '60',
                'default_value' => '60',
                'min_value' => 0,
                'max_value' => 100,
                'input_type' => 'number',
                'input_help' => 'Shots scoring below this threshold will be flagged for narrative improvement',
                'icon' => 'fa-solid fa-gauge',
                'is_system' => true,
                'sort_order' => 5,
            ],
            [
                'slug' => 'shot_progression_similarity_threshold',
                'name' => 'Action Similarity Threshold',
                'category' => 'shot_progression',
                'description' => 'Maximum text similarity (0-100) allowed between consecutive shot actions before flagging as duplicate.',
                'value_type' => 'integer',
                'value' => '85',
                'default_value' => '85',
                'min_value' => 50,
                'max_value' => 100,
                'input_type' => 'number',
                'input_help' => 'Actions with similarity above this % are flagged (85% catches near-identical actions)',
                'icon' => 'fa-solid fa-equals',
                'is_system' => true,
                'sort_order' => 6,
            ],

            // =============================================
            // HOLLYWOOD PRODUCTION FEATURES (Phase 3)
            // These enable Hollywood-quality shot patterns
            // =============================================
            [
                'slug' => 'hollywood_shot_sequences_enabled',
                'name' => 'Enable Hollywood Shot Sequences',
                'category' => 'hollywood',
                'description' => 'Enable Hollywood-standard shot sequence patterns (establishing → medium → close-up progression).',
                'value_type' => 'boolean',
                'value' => 'true',
                'default_value' => 'true',
                'input_type' => 'checkbox',
                'input_help' => 'Uses professional cinematography patterns for shot sequencing',
                'icon' => 'fa-solid fa-clapperboard',
                'is_system' => true,
                'sort_order' => 1,
            ],
            [
                'slug' => 'emotional_arc_shot_mapping_enabled',
                'name' => 'Emotional Arc Shot Mapping',
                'category' => 'hollywood',
                'description' => 'Map emotional intensity to shot types (high emotion = close-ups, calm = wide shots).',
                'value_type' => 'boolean',
                'value' => 'true',
                'default_value' => 'true',
                'input_type' => 'checkbox',
                'input_help' => 'Shot types dynamically adjust based on narrative emotional intensity',
                'icon' => 'fa-solid fa-heart-pulse',
                'is_system' => true,
                'sort_order' => 2,
            ],
            [
                'slug' => 'dialogue_coverage_patterns_enabled',
                'name' => 'Dialogue Coverage Patterns',
                'category' => 'hollywood',
                'description' => 'Apply shot/reverse shot patterns to dialogue scenes automatically.',
                'value_type' => 'boolean',
                'value' => 'true',
                'default_value' => 'true',
                'input_type' => 'checkbox',
                'input_help' => 'Enables professional dialogue coverage (two-shot, over-shoulder, singles)',
                'icon' => 'fa-solid fa-comments',
                'is_system' => true,
                'sort_order' => 3,
            ],

            // =============================================
            // NARRATIVE BEAT PATTERNS (Phase 6+)
            // Defines how actions should progress within shots
            // =============================================
            [
                'slug' => 'narrative_beats_enabled',
                'name' => 'Enable Narrative Beat Patterns',
                'category' => 'narrative_beats',
                'description' => 'Master toggle for narrative beat pattern system. Ensures each shot has a distinct action that advances the story.',
                'value_type' => 'boolean',
                'value' => 'true',
                'default_value' => 'true',
                'input_type' => 'checkbox',
                'input_help' => 'When enabled, AI decomposition follows narrative beat templates for action progression',
                'icon' => 'fa-solid fa-book-open',
                'is_system' => true,
                'sort_order' => 1,
            ],
            [
                'slug' => 'narrative_beats_action_templates',
                'name' => 'Action Progression Templates',
                'category' => 'narrative_beats',
                'description' => 'JSON templates defining how actions should progress through shots. Each beat type maps to a sequence of action verbs.',
                'value_type' => 'json',
                'value' => json_encode([
                    'establishing' => [
                        'surveys', 'observes', 'takes in', 'notices', 'becomes aware of'
                    ],
                    'discovery' => [
                        'realizes', 'discovers', 'recognizes', 'understands', 'senses'
                    ],
                    'decision' => [
                        'decides', 'commits', 'resolves', 'chooses', 'determines'
                    ],
                    'action' => [
                        'acts', 'moves', 'engages', 'executes', 'performs'
                    ],
                    'reaction' => [
                        'responds', 'reacts', 'processes', 'absorbs', 'reflects'
                    ],
                    'revelation' => [
                        'reveals', 'exposes', 'uncovers', 'shows', 'demonstrates'
                    ],
                    'resolution' => [
                        'settles', 'concludes', 'completes', 'finishes', 'achieves'
                    ],
                ], JSON_PRETTY_PRINT),
                'default_value' => null,
                'input_type' => 'json_editor',
                'input_help' => 'Map beat types to action verb progressions. AI will use these to create distinct actions per shot.',
                'icon' => 'fa-solid fa-list-ol',
                'is_system' => true,
                'sort_order' => 2,
            ],
            [
                'slug' => 'narrative_beats_scene_patterns',
                'name' => 'Scene Type Patterns',
                'category' => 'narrative_beats',
                'description' => 'JSON patterns defining ideal beat sequences for different scene types.',
                'value_type' => 'json',
                'value' => json_encode([
                    'action' => [
                        'minShots' => 5,
                        'maxShots' => 12,
                        'beatSequence' => ['establishing', 'action', 'reaction', 'action', 'revelation'],
                        'preferredDurations' => [10, 5, 5, 6, 6],
                        'description' => 'Fast-paced with multiple action-reaction cycles'
                    ],
                    'dialogue' => [
                        'minShots' => 4,
                        'maxShots' => 8,
                        'beatSequence' => ['establishing', 'discovery', 'reaction', 'decision'],
                        'preferredDurations' => [6, 10, 6, 10],
                        'description' => 'Conversation-driven with emotional beats'
                    ],
                    'emotional' => [
                        'minShots' => 3,
                        'maxShots' => 6,
                        'beatSequence' => ['establishing', 'discovery', 'reaction', 'resolution'],
                        'preferredDurations' => [10, 10, 6, 10],
                        'description' => 'Slow build with longer contemplative shots'
                    ],
                    'montage' => [
                        'minShots' => 5,
                        'maxShots' => 15,
                        'beatSequence' => ['action', 'action', 'action', 'revelation'],
                        'preferredDurations' => [5, 5, 5, 6],
                        'description' => 'Quick cuts showing progression of time/action'
                    ],
                    'establishing' => [
                        'minShots' => 2,
                        'maxShots' => 4,
                        'beatSequence' => ['establishing', 'discovery'],
                        'preferredDurations' => [10, 6],
                        'description' => 'Set the scene with wide shots and slow reveals'
                    ],
                ], JSON_PRETTY_PRINT),
                'default_value' => null,
                'input_type' => 'json_editor',
                'input_help' => 'Define beat sequences and shot counts per scene type. Controls how AI decomposes scenes.',
                'icon' => 'fa-solid fa-sitemap',
                'is_system' => true,
                'sort_order' => 3,
            ],
            [
                'slug' => 'narrative_beats_min_duration_by_beat',
                'name' => 'Minimum Duration by Beat Type',
                'category' => 'narrative_beats',
                'description' => 'JSON mapping of beat types to minimum durations. Ensures beats have enough time to complete.',
                'value_type' => 'json',
                'value' => json_encode([
                    'establishing' => 6,
                    'discovery' => 6,
                    'decision' => 6,
                    'action' => 5,
                    'reaction' => 5,
                    'revelation' => 6,
                    'resolution' => 6,
                ], JSON_PRETTY_PRINT),
                'default_value' => null,
                'input_type' => 'json_editor',
                'input_help' => 'Minimum seconds for each beat type. Prevents incomplete actions.',
                'icon' => 'fa-solid fa-stopwatch',
                'is_system' => true,
                'sort_order' => 4,
            ],
            [
                'slug' => 'narrative_beats_enforce_unique_actions',
                'name' => 'Enforce Unique Actions Per Shot',
                'category' => 'narrative_beats',
                'description' => 'Require each shot to have a distinctly different action verb from the previous shot.',
                'value_type' => 'boolean',
                'value' => 'true',
                'default_value' => 'true',
                'input_type' => 'checkbox',
                'input_help' => 'Prevents "man smiles" -> "man smiles" sequences by requiring verb variety',
                'icon' => 'fa-solid fa-fingerprint',
                'is_system' => true,
                'sort_order' => 5,
            ],
            [
                'slug' => 'narrative_beats_dynamic_shot_count',
                'name' => 'Dynamic Shot Count by Content',
                'category' => 'narrative_beats',
                'description' => 'Allow AI to recommend more shots for complex scenes with multiple story beats.',
                'value_type' => 'boolean',
                'value' => 'true',
                'default_value' => 'true',
                'input_type' => 'checkbox',
                'input_help' => 'Enables 6-12+ shots for action scenes, 3-4 for simple establishing shots',
                'icon' => 'fa-solid fa-arrows-left-right',
                'is_system' => true,
                'sort_order' => 6,
            ],
            [
                'slug' => 'narrative_beats_position_awareness',
                'name' => 'Scene Position Awareness',
                'category' => 'narrative_beats',
                'description' => 'Consider scene position in overall video when determining beat patterns (early=establishing, climax=action).',
                'value_type' => 'boolean',
                'value' => 'true',
                'default_value' => 'true',
                'input_type' => 'checkbox',
                'input_help' => 'Scene 1 of 10 uses establishing patterns; Scene 8 of 10 uses climax patterns',
                'icon' => 'fa-solid fa-map-marker-alt',
                'is_system' => true,
                'sort_order' => 7,
            ],
            [
                'slug' => 'narrative_beats_ai_prompt_enhancement',
                'name' => 'AI Prompt Enhancement Template',
                'category' => 'narrative_beats',
                'description' => 'Additional prompt text injected into AI decomposition to enforce narrative beat patterns.',
                'value_type' => 'string',
                'value' => 'NARRATIVE BEAT RULES (CRITICAL - each shot must advance the story):
1. Each shot MUST have a UNIQUE action verb - never repeat "smiles", "looks", etc. between consecutive shots
2. Shot actions must BUILD upon each other: observe → notice → react → decide → act
3. Example progression for 5 shots:
   - Shot 1: "The subject surveys the environment with cautious awareness"
   - Shot 2: "The subject notices a critical detail, expression shifting to recognition"
   - Shot 3: "The subject reacts with determination, stance becoming purposeful"
   - Shot 4: "The subject initiates action, energy building in movement"
   - Shot 5: "The subject completes the action, consequences visible in the result"
4. FORBIDDEN: Two consecutive shots with same/similar actions (no "walks" then "walks")
5. Each shot must answer: "What NEW thing happens in this shot?"',
                'default_value' => null,
                'input_type' => 'textarea',
                'input_help' => 'This text is added to the AI prompt to enforce narrative progression rules',
                'icon' => 'fa-solid fa-robot',
                'is_system' => true,
                'sort_order' => 8,
            ],

            // =============================================
            // CHARACTER ENRICHMENT SETTINGS
            // Ensures all characters get detailed descriptions
            // =============================================
            [
                'slug' => 'character_enrichment_enabled',
                'name' => 'Enable Character Enrichment',
                'category' => 'character_enrichment',
                'description' => 'Automatically generate descriptions for characters that were extracted without details (due to AI response limits).',
                'value_type' => 'boolean',
                'value' => 'true',
                'default_value' => 'true',
                'input_type' => 'checkbox',
                'input_help' => 'When enabled, makes follow-up AI calls to fill in missing character descriptions',
                'icon' => 'fa-solid fa-user-pen',
                'is_system' => true,
                'sort_order' => 1,
            ],
            [
                'slug' => 'character_enrichment_batch_size',
                'name' => 'Enrichment Batch Size',
                'category' => 'character_enrichment',
                'description' => 'Number of characters to enrich per AI call. Smaller batches are more reliable but cost more API calls.',
                'value_type' => 'integer',
                'value' => '3',
                'default_value' => '3',
                'min_value' => 1,
                'max_value' => 10,
                'input_type' => 'number',
                'input_help' => 'Recommended: 3 for reliability, up to 5 for efficiency',
                'icon' => 'fa-solid fa-layer-group',
                'is_system' => true,
                'sort_order' => 2,
            ],
            [
                'slug' => 'character_enrichment_min_description_length',
                'name' => 'Minimum Description Length',
                'category' => 'character_enrichment',
                'description' => 'Characters with descriptions shorter than this will be considered incomplete and enriched.',
                'value_type' => 'integer',
                'value' => '30',
                'default_value' => '30',
                'min_value' => 10,
                'max_value' => 100,
                'input_type' => 'number',
                'input_help' => 'Characters with description < 30 chars are likely truncated and need enrichment',
                'icon' => 'fa-solid fa-text-width',
                'is_system' => true,
                'sort_order' => 3,
            ],
            [
                'slug' => 'character_sort_enabled',
                'name' => 'Enable Character Sorting',
                'category' => 'character_enrichment',
                'description' => 'Automatically sort characters by importance (role and scene count) in the Character Bible.',
                'value_type' => 'boolean',
                'value' => 'true',
                'default_value' => 'true',
                'input_type' => 'checkbox',
                'input_help' => 'Main characters appear first, sorted by number of scene appearances',
                'icon' => 'fa-solid fa-arrow-down-wide-short',
                'is_system' => true,
                'sort_order' => 4,
            ],
            [
                'slug' => 'character_sort_method',
                'name' => 'Character Sort Method',
                'category' => 'character_enrichment',
                'description' => 'How to sort characters in the Character Bible list.',
                'value_type' => 'string',
                'value' => 'role_then_scenes',
                'default_value' => 'role_then_scenes',
                'allowed_values' => json_encode(['role_then_scenes', 'scenes_only', 'alphabetical']),
                'input_type' => 'select',
                'input_help' => 'role_then_scenes: Main→Supporting→Background, then by scene count. scenes_only: Just by scene count. alphabetical: A-Z by name.',
                'icon' => 'fa-solid fa-sort',
                'is_system' => true,
                'sort_order' => 5,
            ],

            // =============================================
            // AUTOMATION SETTINGS
            // Auto-generation of references and prompt chain
            // =============================================
            [
                'slug' => 'auto_generate_character_references',
                'name' => 'Auto-Generate Character Portraits',
                'category' => 'automation',
                'description' => 'Automatically generate character portrait reference images after Character Bible is populated.',
                'value_type' => 'boolean',
                'value' => 'true',
                'default_value' => 'true',
                'input_type' => 'checkbox',
                'input_help' => 'When enabled, character portraits are queued for generation automatically after detection',
                'icon' => 'fa-solid fa-portrait',
                'is_system' => true,
                'sort_order' => 1,
            ],
            [
                'slug' => 'auto_generate_location_references',
                'name' => 'Auto-Generate Location References',
                'category' => 'automation',
                'description' => 'Automatically generate location reference images after Location Bible is populated.',
                'value_type' => 'boolean',
                'value' => 'true',
                'default_value' => 'true',
                'input_type' => 'checkbox',
                'input_help' => 'When enabled, location references are queued for generation automatically after detection',
                'icon' => 'fa-solid fa-location-dot',
                'is_system' => true,
                'sort_order' => 2,
            ],
            [
                'slug' => 'auto_process_prompt_chain',
                'name' => 'Auto-Process Prompt Chain',
                'category' => 'automation',
                'description' => 'Automatically process and compile prompt chain after script generation.',
                'value_type' => 'boolean',
                'value' => 'true',
                'default_value' => 'true',
                'input_type' => 'checkbox',
                'input_help' => 'When enabled, prompt chain is processed immediately after script is generated',
                'icon' => 'fa-solid fa-link',
                'is_system' => true,
                'sort_order' => 3,
            ],

            // =============================================
            // CONCEPT DEVELOPMENT SETTINGS
            // =============================================
            [
                'slug' => 'concept_clone_technical_rules',
                'name' => 'Clone Technical Rules',
                'category' => 'concept',
                'description' => 'Technical rules for CLONE videoPrompts — prioritizes action timeline faithfulness over aggressive Seedance formatting. Used in synthesizeConcept() for video cloning.',
                'value_type' => 'string',
                'value' => '=== CLONE VIDEO PROMPT FORMAT ===

Write a natural, vivid narrative that describes the complete action of the source video.
Use clear, descriptive language. Include dialogue, sounds, and camera style.

PROMPT STRUCTURE — FOLLOW THE COMPLETE ACTION TIMELINE:
Write flowing prose that covers EVERY action phase from the analysis. Do NOT skip any phase.
Connect actions with natural transitions: "then", "suddenly", "in a quick motion".
End with: "Cinematic, photorealistic."
If the analysis describes 8 action phases → cover ALL 8 in your narrative.

INCLUDE:
- Dialogue in quotes from the audio transcript: yells "How can you ruin this?"
- Character sounds: meows, yells, screams — these drive accurate audio generation
- Camera style when notable: "A chaotic, shaking handheld camera follows the action"
- Emotional states as part of actions: "leans aggressively", "angrily points"
- Specific body parts: "slaps the man\'s face with its right paw", "lands on the man\'s left shoulder"
- Object displacement as cause-and-effect: "jumps onto the counter and violently knocks over the iced coffee cup"

DO NOT INCLUDE:
- NO scene/setting/environment descriptions — the source image provides the scene.
- NO appearance/clothing/color descriptions — the source image provides appearance.
- NO background music mentions — Seedance generates audio from text, any music reference creates unwanted audio.
- NO facial micro-expressions ("eyes widen", "brow furrows") — convey emotion through body language.
- NO semicolons, NO passive voice.
- Do NOT fabricate actions not in the analysis. Faithful to what actually happened.
- Match intensity to the analysis: calm scene = gently/steadily, intense scene = crazily/violently.
- If characters are miniaturized/enlarged, MENTION the size — it affects rendering.
- Target: 100-150 words (8+ action phases → aim for 120-150 words). Under 90 = missing key actions. Completeness over brevity — include every phase from FIRST to LAST.

GOLD-STANDARD EXAMPLE (~75 words — this prompt produced excellent Seedance results):
"The bear steadily walks forward. The bike\'s front wheel bumps into the bear\'s butt. The bear rapidly glances back over his shoulder, flashing a big funny smile, then turns his head forward. Instantly the bear starts a rhythmic hip-swaying butt dance, hips crazily bobbing side to side with large amplitude at high frequency, its whole body bouncing in a funny groove. The bear\'s arms swing loosely with large amplitude matching the hip rhythm. Continuous comedic energy throughout. Cinematic, photorealistic."

WHY IT WORKS — Follow this pattern for ANY video:
- Setup: First action — what starts the scene (1 sentence)
- Trigger: What causes the chain reaction (1 sentence)
- Reaction: Immediate response (1-2 sentences)
- Main action: The core — most detail here (1-3 sentences)
- Aftermath/Resolution: What happens AFTER the climax — pulling off, throwing, walking away, giving up. DO NOT SKIP THIS. (1-3 sentences)
- Style: "Cinematic, photorealistic." (always last)
The bear example is SHORT because the bear has no resolution phase. For videos with more phases, write MORE sentences.
CRITICAL: Your LAST action sentence should describe the FINAL thing that happens in the video, NOT the climax.',
                'default_value' => null,
                'input_type' => 'textarea',
                'input_help' => 'Technical rules injected into clone videoPrompt generation. These control how the AI writes video prompts when cloning existing videos.',
                'icon' => 'fa-solid fa-clone',
                'is_system' => false,
                'sort_order' => 1,
            ],
            [
                'slug' => 'concept_chaos_supercharger',
                'name' => 'Chaos Mode Supercharger',
                'category' => 'concept',
                'description' => 'Structural override appended when Chaos Mode toggle is active. Replaces normal action structure with fewer mega-beats and front-loaded explosion.',
                'value_type' => 'string',
                'value' => '=== CHAOS MODE ACTIVE — OVERRIDE STRUCTURE ===

IMPORTANT: Chaos Mode overrides the normal action structure. Follow THESE rules instead:

FEWER MEGA-BEATS (3-4 maximum):
Instead of 6-8 rapid micro-actions, write ONLY 3-4 MASSIVE action beats.
Each beat gets 2-3 full sentences of detailed physical description.
More detail per beat = more motion energy Seedance allocates to each movement.

FRONT-LOAD THE IMPACT:
The BIGGEST, most intense action happens IMMEDIATELY after "Instantly".
Do NOT build up gradually. The first physical strike is the most intense one.
Structure: TRIGGER → INSTANT MEGA-STRIKE → escalation → peak destruction

EXAMPLE — CHAOS MODE PROMPT:
"The man says \'This is the worst pizza I\'ve ever had!\' Instantly the cat
reacts at high frequency and crazy intensity, lunging forward fast and
violently from behind the counter directly at the man\'s face, front claws
swiping wildly with large amplitude, slamming into his chest powerfully,
sending him staggering violently backwards. The man crashes fast into a shelf
of glass bottles, his arms flailing wildly as bottles shatter and liquid
sprays with large amplitude in every direction. The cat\'s hind legs kick at
high frequency against the man\'s torso, shredding fabric fast while the cat
screams a crazy intense yowl, mouth gaping wide. The man collapses
powerfully onto the floor, pulling an entire display rack down with him,
plates and cups crashing violently around him as the cat stands on his chest
screaming wildly. Continuous crazy aggressive cat screaming throughout.
Cinematic, photorealistic."

KEY DIFFERENCES FROM NORMAL MODE:
- 4 mega-beats instead of 8 micro-beats
- Each beat has 2-3 sentences of detailed motion
- First action (the launch) is the BIGGEST
- "crazy" appears 3+ times
- Every action has 2+ combined degree words',
                'default_value' => null,
                'input_type' => 'textarea',
                'input_help' => 'Override instructions for Chaos Mode. Appended to chaos modifier when the Chaos Mode toggle is active.',
                'icon' => 'fa-solid fa-explosion',
                'is_system' => false,
                'sort_order' => 2,
            ],
            [
                'slug' => 'concept_style_modifiers',
                'name' => 'Style Prompt Modifiers',
                'category' => 'concept',
                'description' => 'JSON object mapping production subtypes to style modifier prompts. Keys: viral, meme-comedy, educational-short, story-short, product, lifestyle.',
                'value_type' => 'json',
                'value' => '{"viral":"CONTENT STYLE — VIRAL/TRENDING:\\nFocus on maximum shareability and instant visual hooks. Lean into animal chaos, physical comedy,\\nand visual absurdity. Single continuous shots with dramatic reactions, objects flying, and pure\\nslapstick energy. Every idea should make someone immediately want to tag a friend.","meme-comedy":"CONTENT STYLE — MEME/COMEDY:\\nLean into specific meme formats and internet comedy tropes. Think \\"when your...\\" scenarios,\\nanimals with deadpan delivery, absurd workplace humor, and quotable dialogue lines. The comedy\\nshould come from relatable situations twisted into absurdity. Prioritize punchy one-liners,\\nsarcastic comebacks, and reaction-worthy moments over pure physical comedy.","educational-short":"CONTENT STYLE — QUICK EXPLAINER:\\nFrame ideas as bite-sized educational content. A character or narrator explains a fascinating\\nconcept, science fact, or \\"did you know?\\" tidbit. Keep it visual — show don\'t tell. The hook\\nshould be a surprising fact or counter-intuitive truth that makes viewers watch to the end.","story-short":"CONTENT STYLE — STORY/NARRATIVE:\\nCreate mini-narratives with emotional arcs. Each idea needs a setup, tension, and payoff —\\na twist ending, a heartwarming reveal, or a \\"wait for it\\" moment. Focus on character-driven\\nscenarios that make viewers feel something. The hook is curiosity: \\"what happens next?\\"","product":"CONTENT STYLE — PRODUCT SHOWCASE:\\nFrame ideas around satisfying product reveals, unboxing moments, or \\"watch this\\" demonstrations.\\nDynamic close-ups, before/after transformations, and aspirational lifestyle context. Every concept\\nshould make the viewer think \\"I need that.\\" Emphasize visual satisfaction and desire.","lifestyle":"CONTENT STYLE — LIFESTYLE:\\nCreate aspirational, aesthetically pleasing content. Morning routines, cozy moments, day-in-the-life\\nmontages with warm color grading. Focus on visual beauty, satisfying sequences, and \\"living my\\nbest life\\" energy. The mood should be calming, inspiring, or aesthetically satisfying."}',
                'default_value' => null,
                'input_type' => 'json_editor',
                'input_help' => 'JSON object with production subtype keys and style modifier text values. Edit individual styles to change how AI generates concepts for each content type.',
                'icon' => 'fa-solid fa-paintbrush',
                'is_system' => false,
                'sort_order' => 3,
            ],
            [
                'slug' => 'concept_video_analysis_prompt',
                'name' => 'Video Analysis Prompt',
                'category' => 'concept',
                'description' => 'The comprehensive prompt sent to Gemini for native video analysis when cloning videos. Covers characters, setting, action timeline, audio, camera style, and viral formula detection.',
                'value_type' => 'string',
                'value' => '',
                'default_value' => null,
                'input_type' => 'textarea',
                'input_help' => 'Leave empty to use the built-in video analysis prompt. This is the ~1100 word prompt that drives Gemini video understanding for concept cloning.',
                'icon' => 'fa-solid fa-video',
                'is_system' => false,
                'sort_order' => 4,
            ],
            [
                'slug' => 'concept_seedance_system_message',
                'name' => 'Seedance Specialist System Message',
                'category' => 'concept',
                'description' => 'System message used in synthesizeConcept() — instructs the AI as a Seedance 1.5 Pro video prompt specialist. Contains writing style rules and examples.',
                'value_type' => 'string',
                'value' => '',
                'default_value' => null,
                'input_type' => 'textarea',
                'input_help' => 'Leave empty to use the built-in system message. This is the system prompt for the concept synthesis AI call.',
                'icon' => 'fa-solid fa-robot',
                'is_system' => false,
                'sort_order' => 5,
            ],
        ];

        foreach ($settings as $setting) {
            VwSetting::updateOrCreate(
                ['slug' => $setting['slug']],
                $setting
            );
        }

        // Clear cache after seeding
        VwSetting::clearCache();
    }
}
